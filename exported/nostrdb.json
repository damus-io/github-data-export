[
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/26",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/26/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/26/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/26/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/26",
      "id": 2181280152,
      "node_id": "I_kwDOJ9k5Is6CA7GY",
      "number": 26,
      "title": "Add created_at query plan",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "assignees": [
        {
          "login": "jb55",
          "id": 45598,
          "node_id": "MDQ6VXNlcjQ1NTk4",
          "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jb55",
          "html_url": "https://github.com/jb55",
          "followers_url": "https://api.github.com/users/jb55/followers",
          "following_url": "https://api.github.com/users/jb55/following{/other_user}",
          "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
          "organizations_url": "https://api.github.com/users/jb55/orgs",
          "repos_url": "https://api.github.com/users/jb55/repos",
          "events_url": "https://api.github.com/users/jb55/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jb55/received_events",
          "type": "User",
          "site_admin": false
        }
      ],
      "milestone": null,
      "comments": 0,
      "created_at": "2024-03-12T10:38:04Z",
      "updated_at": "2024-03-13T07:55:39Z",
      "closed_at": "2024-03-13T07:55:39Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "For timeline queries and query fallbacks, the simplest possible query plan is the created_at scan. This works well for timelines in our case, because nostrdb is not typically used as a global database and should contain notes intended for us anyways. This allows us to simplify timeline queries into a linear scan. Since most of our indices are ordered by created_at, this linear scan is pretty efficient for looking for recent notes.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/26/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/26/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/25",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/25",
      "id": 2067542613,
      "node_id": "PR_kwDOJ9k5Is5jUpuv",
      "number": 25,
      "title": "Fix typos",
      "user": {
        "login": "shuoer86",
        "id": 129674997,
        "node_id": "U_kgDOB7qu9Q",
        "avatar_url": "https://avatars.githubusercontent.com/u/129674997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shuoer86",
        "html_url": "https://github.com/shuoer86",
        "followers_url": "https://api.github.com/users/shuoer86/followers",
        "following_url": "https://api.github.com/users/shuoer86/following{/other_user}",
        "gists_url": "https://api.github.com/users/shuoer86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/shuoer86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/shuoer86/subscriptions",
        "organizations_url": "https://api.github.com/users/shuoer86/orgs",
        "repos_url": "https://api.github.com/users/shuoer86/repos",
        "events_url": "https://api.github.com/users/shuoer86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/shuoer86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2024-01-05T15:27:36Z",
      "updated_at": "2024-01-05T18:26:22Z",
      "closed_at": "2024-01-05T18:25:24Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/25",
        "html_url": "https://github.com/damus-io/nostrdb/pull/25",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/25.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/25.patch",
        "merged_at": null
      },
      "body": null,
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/25",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/25",
      "id": 2067542613,
      "node_id": "PR_kwDOJ9k5Is5jUpuv",
      "number": 25,
      "title": "Fix typos",
      "user": {
        "login": "shuoer86",
        "id": 129674997,
        "node_id": "U_kgDOB7qu9Q",
        "avatar_url": "https://avatars.githubusercontent.com/u/129674997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shuoer86",
        "html_url": "https://github.com/shuoer86",
        "followers_url": "https://api.github.com/users/shuoer86/followers",
        "following_url": "https://api.github.com/users/shuoer86/following{/other_user}",
        "gists_url": "https://api.github.com/users/shuoer86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/shuoer86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/shuoer86/subscriptions",
        "organizations_url": "https://api.github.com/users/shuoer86/orgs",
        "repos_url": "https://api.github.com/users/shuoer86/repos",
        "events_url": "https://api.github.com/users/shuoer86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/shuoer86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2024-01-05T15:27:36Z",
      "updated_at": "2024-01-05T18:26:22Z",
      "closed_at": "2024-01-05T18:25:24Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/25",
        "html_url": "https://github.com/damus-io/nostrdb/pull/25",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/25.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/25.patch",
        "merged_at": null
      },
      "body": null,
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/25/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2024-01-05T18:26:21Z",
      "updated_at": "2024-01-05T18:26:21Z",
      "body": "Thanks!\n\npushed\n\nTo github.com:damus-io/nostrdb\n    3802828..6285179  master -> master\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/24",
      "id": 2061809289,
      "node_id": "I_kwDOJ9k5Is565LaJ",
      "number": 24,
      "title": "Valgrind reports a memory leak.",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 6,
      "created_at": "2024-01-01T22:39:33Z",
      "updated_at": "2024-01-03T05:39:43Z",
      "closed_at": null,
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "here is the full report:\r\n```\r\nvalgrind  --leak-check=full  ./ndb search --limit 2 --oldest-first 'nosy ostrich'\r\n==90548== Memcheck, a memory error detector\r\n==90548== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==90548== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info\r\n==90548== Command: ./ndb search --limit 2 --oldest-first nosy\\ ostrich\r\n==90548== \r\nusing db '.'\r\nmdb_env_open failed, error 22\r\n==90548== \r\n==90548== HEAP SUMMARY:\r\n==90548==     in use at exit: 528 bytes in 2 blocks\r\n==90548==   total heap usage: 9 allocs, 7 frees, 3,146,979 bytes allocated\r\n==90548== \r\n==90548== 528 (280 direct, 248 indirect) bytes in 1 blocks are definitely lost in loss record 2 of 2\r\n==90548==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==90548==    by 0x11635B: ndb_init (nostrdb.c:3222)\r\n==90548==    by 0x10E557: main (ndb.c:133)\r\n==90548== \r\n==90548== LEAK SUMMARY:\r\n==90548==    definitely lost: 280 bytes in 1 blocks\r\n==90548==    indirectly lost: 248 bytes in 1 blocks\r\n==90548==      possibly lost: 0 bytes in 0 blocks\r\n==90548==    still reachable: 0 bytes in 0 blocks\r\n==90548==         suppressed: 0 bytes in 0 blocks\r\n==90548== \r\n==90548== For lists of detected and suppressed errors, rerun with: -s\r\n==90548== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```\r\n\r\nThe memory leak is negligible but it would be nice to add some kind of report in case of memory leak in the CI.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/24",
      "id": 2061809289,
      "node_id": "I_kwDOJ9k5Is565LaJ",
      "number": 24,
      "title": "Valgrind reports a memory leak.",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 6,
      "created_at": "2024-01-01T22:39:33Z",
      "updated_at": "2024-01-03T05:39:43Z",
      "closed_at": null,
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "here is the full report:\r\n```\r\nvalgrind  --leak-check=full  ./ndb search --limit 2 --oldest-first 'nosy ostrich'\r\n==90548== Memcheck, a memory error detector\r\n==90548== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==90548== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info\r\n==90548== Command: ./ndb search --limit 2 --oldest-first nosy\\ ostrich\r\n==90548== \r\nusing db '.'\r\nmdb_env_open failed, error 22\r\n==90548== \r\n==90548== HEAP SUMMARY:\r\n==90548==     in use at exit: 528 bytes in 2 blocks\r\n==90548==   total heap usage: 9 allocs, 7 frees, 3,146,979 bytes allocated\r\n==90548== \r\n==90548== 528 (280 direct, 248 indirect) bytes in 1 blocks are definitely lost in loss record 2 of 2\r\n==90548==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==90548==    by 0x11635B: ndb_init (nostrdb.c:3222)\r\n==90548==    by 0x10E557: main (ndb.c:133)\r\n==90548== \r\n==90548== LEAK SUMMARY:\r\n==90548==    definitely lost: 280 bytes in 1 blocks\r\n==90548==    indirectly lost: 248 bytes in 1 blocks\r\n==90548==      possibly lost: 0 bytes in 0 blocks\r\n==90548==    still reachable: 0 bytes in 0 blocks\r\n==90548==         suppressed: 0 bytes in 0 blocks\r\n==90548== \r\n==90548== For lists of detected and suppressed errors, rerun with: -s\r\n==90548== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```\r\n\r\nThe memory leak is negligible but it would be nice to add some kind of report in case of memory leak in the CI.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2024-01-01T22:47:11Z",
      "updated_at": "2024-01-01T22:47:11Z",
      "body": "On Mon, Jan 01, 2024 at 02:39:44PM -0800, Bruno Bernard wrote:\n>here is the full report:\n>```\n>valgrind  --leak-check=full  ./ndb search --limit 2 --oldest-first 'nosy ostrich'\n>==90548==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\n>==90548==    by 0x11635B: ndb_init (nostrdb.c:3222)\n>==90548==    by 0x10E557: main (ndb.c:133)\n>```\n>\n>The memory leak is negligible but it would be nice to add some kind of report in case of memory leak in the CI.\n\nhow does valgrind determine leaks in this case? of course this is\nleaking because free only happens on ndb_destroy.\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/24",
      "id": 2061809289,
      "node_id": "I_kwDOJ9k5Is565LaJ",
      "number": 24,
      "title": "Valgrind reports a memory leak.",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 6,
      "created_at": "2024-01-01T22:39:33Z",
      "updated_at": "2024-01-03T05:39:43Z",
      "closed_at": null,
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "here is the full report:\r\n```\r\nvalgrind  --leak-check=full  ./ndb search --limit 2 --oldest-first 'nosy ostrich'\r\n==90548== Memcheck, a memory error detector\r\n==90548== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==90548== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info\r\n==90548== Command: ./ndb search --limit 2 --oldest-first nosy\\ ostrich\r\n==90548== \r\nusing db '.'\r\nmdb_env_open failed, error 22\r\n==90548== \r\n==90548== HEAP SUMMARY:\r\n==90548==     in use at exit: 528 bytes in 2 blocks\r\n==90548==   total heap usage: 9 allocs, 7 frees, 3,146,979 bytes allocated\r\n==90548== \r\n==90548== 528 (280 direct, 248 indirect) bytes in 1 blocks are definitely lost in loss record 2 of 2\r\n==90548==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==90548==    by 0x11635B: ndb_init (nostrdb.c:3222)\r\n==90548==    by 0x10E557: main (ndb.c:133)\r\n==90548== \r\n==90548== LEAK SUMMARY:\r\n==90548==    definitely lost: 280 bytes in 1 blocks\r\n==90548==    indirectly lost: 248 bytes in 1 blocks\r\n==90548==      possibly lost: 0 bytes in 0 blocks\r\n==90548==    still reachable: 0 bytes in 0 blocks\r\n==90548==         suppressed: 0 bytes in 0 blocks\r\n==90548== \r\n==90548== For lists of detected and suppressed errors, rerun with: -s\r\n==90548== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```\r\n\r\nThe memory leak is negligible but it would be nice to add some kind of report in case of memory leak in the CI.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "eznix86",
      "created_at": "2024-01-01T23:45:55Z",
      "updated_at": "2024-01-01T23:46:11Z",
      "body": "While reading the code, I saw that. But Valgrind spits the memory leaks as it sees it happening during the execution. Even if memory is freed at the end using `ndb_destroy`. _Maybe_ a proper fix would be to free the memory right after it is no longer needed. What do you think ?\r\n\r\nAlso, it is negligible. 280 Bytes ¯\\_(ツ)_/¯ "
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/24",
      "id": 2061809289,
      "node_id": "I_kwDOJ9k5Is565LaJ",
      "number": 24,
      "title": "Valgrind reports a memory leak.",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 6,
      "created_at": "2024-01-01T22:39:33Z",
      "updated_at": "2024-01-03T05:39:43Z",
      "closed_at": null,
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "here is the full report:\r\n```\r\nvalgrind  --leak-check=full  ./ndb search --limit 2 --oldest-first 'nosy ostrich'\r\n==90548== Memcheck, a memory error detector\r\n==90548== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==90548== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info\r\n==90548== Command: ./ndb search --limit 2 --oldest-first nosy\\ ostrich\r\n==90548== \r\nusing db '.'\r\nmdb_env_open failed, error 22\r\n==90548== \r\n==90548== HEAP SUMMARY:\r\n==90548==     in use at exit: 528 bytes in 2 blocks\r\n==90548==   total heap usage: 9 allocs, 7 frees, 3,146,979 bytes allocated\r\n==90548== \r\n==90548== 528 (280 direct, 248 indirect) bytes in 1 blocks are definitely lost in loss record 2 of 2\r\n==90548==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==90548==    by 0x11635B: ndb_init (nostrdb.c:3222)\r\n==90548==    by 0x10E557: main (ndb.c:133)\r\n==90548== \r\n==90548== LEAK SUMMARY:\r\n==90548==    definitely lost: 280 bytes in 1 blocks\r\n==90548==    indirectly lost: 248 bytes in 1 blocks\r\n==90548==      possibly lost: 0 bytes in 0 blocks\r\n==90548==    still reachable: 0 bytes in 0 blocks\r\n==90548==         suppressed: 0 bytes in 0 blocks\r\n==90548== \r\n==90548== For lists of detected and suppressed errors, rerun with: -s\r\n==90548== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```\r\n\r\nThe memory leak is negligible but it would be nice to add some kind of report in case of memory leak in the CI.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2024-01-01T23:58:06Z",
      "updated_at": "2024-01-01T23:58:06Z",
      "body": "On Mon, Jan 01, 2024 at 03:46:06PM -0800, Bruno Bernard wrote:\n>While reading the code, I saw that. But Valgrind spits the memory leaks\n>as it sees it happening during the execution. Even if memory is freed\n>at the end using `ndb_destroy`. _Maybe_ a proper fix would be to free\n>the memory right after it is no longer needed. What do you think\n>instead of waiting at the end.\n\nThat wouldn't make any sense. Everything is needed in ndb until the\ndatabase is closed.\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/24",
      "id": 2061809289,
      "node_id": "I_kwDOJ9k5Is565LaJ",
      "number": 24,
      "title": "Valgrind reports a memory leak.",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 6,
      "created_at": "2024-01-01T22:39:33Z",
      "updated_at": "2024-01-03T05:39:43Z",
      "closed_at": null,
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "here is the full report:\r\n```\r\nvalgrind  --leak-check=full  ./ndb search --limit 2 --oldest-first 'nosy ostrich'\r\n==90548== Memcheck, a memory error detector\r\n==90548== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==90548== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info\r\n==90548== Command: ./ndb search --limit 2 --oldest-first nosy\\ ostrich\r\n==90548== \r\nusing db '.'\r\nmdb_env_open failed, error 22\r\n==90548== \r\n==90548== HEAP SUMMARY:\r\n==90548==     in use at exit: 528 bytes in 2 blocks\r\n==90548==   total heap usage: 9 allocs, 7 frees, 3,146,979 bytes allocated\r\n==90548== \r\n==90548== 528 (280 direct, 248 indirect) bytes in 1 blocks are definitely lost in loss record 2 of 2\r\n==90548==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==90548==    by 0x11635B: ndb_init (nostrdb.c:3222)\r\n==90548==    by 0x10E557: main (ndb.c:133)\r\n==90548== \r\n==90548== LEAK SUMMARY:\r\n==90548==    definitely lost: 280 bytes in 1 blocks\r\n==90548==    indirectly lost: 248 bytes in 1 blocks\r\n==90548==      possibly lost: 0 bytes in 0 blocks\r\n==90548==    still reachable: 0 bytes in 0 blocks\r\n==90548==         suppressed: 0 bytes in 0 blocks\r\n==90548== \r\n==90548== For lists of detected and suppressed errors, rerun with: -s\r\n==90548== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```\r\n\r\nThe memory leak is negligible but it would be nice to add some kind of report in case of memory leak in the CI.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "eznix86",
      "created_at": "2024-01-02T11:34:29Z",
      "updated_at": "2024-01-02T11:34:29Z",
      "body": "I agree, but I think it's something related with the calloc. Rather than the ndb itself. I can close the issue. But it would be nice to have some kind of memory leak checker in the CI. What do you think ?"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/24",
      "id": 2061809289,
      "node_id": "I_kwDOJ9k5Is565LaJ",
      "number": 24,
      "title": "Valgrind reports a memory leak.",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 6,
      "created_at": "2024-01-01T22:39:33Z",
      "updated_at": "2024-01-03T05:39:43Z",
      "closed_at": null,
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "here is the full report:\r\n```\r\nvalgrind  --leak-check=full  ./ndb search --limit 2 --oldest-first 'nosy ostrich'\r\n==90548== Memcheck, a memory error detector\r\n==90548== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==90548== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info\r\n==90548== Command: ./ndb search --limit 2 --oldest-first nosy\\ ostrich\r\n==90548== \r\nusing db '.'\r\nmdb_env_open failed, error 22\r\n==90548== \r\n==90548== HEAP SUMMARY:\r\n==90548==     in use at exit: 528 bytes in 2 blocks\r\n==90548==   total heap usage: 9 allocs, 7 frees, 3,146,979 bytes allocated\r\n==90548== \r\n==90548== 528 (280 direct, 248 indirect) bytes in 1 blocks are definitely lost in loss record 2 of 2\r\n==90548==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==90548==    by 0x11635B: ndb_init (nostrdb.c:3222)\r\n==90548==    by 0x10E557: main (ndb.c:133)\r\n==90548== \r\n==90548== LEAK SUMMARY:\r\n==90548==    definitely lost: 280 bytes in 1 blocks\r\n==90548==    indirectly lost: 248 bytes in 1 blocks\r\n==90548==      possibly lost: 0 bytes in 0 blocks\r\n==90548==    still reachable: 0 bytes in 0 blocks\r\n==90548==         suppressed: 0 bytes in 0 blocks\r\n==90548== \r\n==90548== For lists of detected and suppressed errors, rerun with: -s\r\n==90548== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```\r\n\r\nThe memory leak is negligible but it would be nice to add some kind of report in case of memory leak in the CI.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2024-01-02T15:16:12Z",
      "updated_at": "2024-01-02T15:16:12Z",
      "body": "On Tue, Jan 02, 2024 at 03:34:40AM -0800, Bruno Bernard wrote:\n>I agree, but I think it's something related with the calloc. Rather\n>than the ndb itself. I can close the issue. But it would be nice to\n>have some kind of memory leak checker in the CI. What do you think ?\n\nyeah for sure, ideally without these false positives.\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/24",
      "id": 2061809289,
      "node_id": "I_kwDOJ9k5Is565LaJ",
      "number": 24,
      "title": "Valgrind reports a memory leak.",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 6,
      "created_at": "2024-01-01T22:39:33Z",
      "updated_at": "2024-01-03T05:39:43Z",
      "closed_at": null,
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "here is the full report:\r\n```\r\nvalgrind  --leak-check=full  ./ndb search --limit 2 --oldest-first 'nosy ostrich'\r\n==90548== Memcheck, a memory error detector\r\n==90548== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==90548== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info\r\n==90548== Command: ./ndb search --limit 2 --oldest-first nosy\\ ostrich\r\n==90548== \r\nusing db '.'\r\nmdb_env_open failed, error 22\r\n==90548== \r\n==90548== HEAP SUMMARY:\r\n==90548==     in use at exit: 528 bytes in 2 blocks\r\n==90548==   total heap usage: 9 allocs, 7 frees, 3,146,979 bytes allocated\r\n==90548== \r\n==90548== 528 (280 direct, 248 indirect) bytes in 1 blocks are definitely lost in loss record 2 of 2\r\n==90548==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==90548==    by 0x11635B: ndb_init (nostrdb.c:3222)\r\n==90548==    by 0x10E557: main (ndb.c:133)\r\n==90548== \r\n==90548== LEAK SUMMARY:\r\n==90548==    definitely lost: 280 bytes in 1 blocks\r\n==90548==    indirectly lost: 248 bytes in 1 blocks\r\n==90548==      possibly lost: 0 bytes in 0 blocks\r\n==90548==    still reachable: 0 bytes in 0 blocks\r\n==90548==         suppressed: 0 bytes in 0 blocks\r\n==90548== \r\n==90548== For lists of detected and suppressed errors, rerun with: -s\r\n==90548== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```\r\n\r\nThe memory leak is negligible but it would be nice to add some kind of report in case of memory leak in the CI.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/24/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "eznix86",
      "created_at": "2024-01-03T05:39:42Z",
      "updated_at": "2024-01-03T05:39:42Z",
      "body": "Valgrind has some suppression features. I will push it for the CI, when I have some time"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/23",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/23",
      "id": 2061779863,
      "node_id": "PR_kwDOJ9k5Is5jBQNc",
      "number": 23,
      "title": "Add required dependencies to README",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2024-01-01T21:23:23Z",
      "updated_at": "2024-01-03T11:20:58Z",
      "closed_at": null,
      "author_association": "FIRST_TIME_CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/23",
        "html_url": "https://github.com/damus-io/nostrdb/pull/23",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/23.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/23.patch",
        "merged_at": null
      },
      "body": "fixes #22 \r\n\r\n~3 _required_ dependencies are missing to be able to install the project properly.~\r\n\r\nAs for Mac OS (In my case Sonoma), I have to write `byteswap.h` to `/usr/local/include/`\r\n\r\n```c\r\n#if defined(__APPLE__)\r\n// Mac OS X / Darwin features\r\n#include <libkern/OSByteOrder.h>\r\n#define bswap_16(x) OSSwapInt16(x)\r\n#define bswap_32(x) OSSwapInt32(x)\r\n#define bswap_64(x) OSSwapInt64(x)\r\n#endif\r\n```\r\n\r\nedit: 2 _required_ dependencies are needed to be able to install the project properly.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/23",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/23",
      "id": 2061779863,
      "node_id": "PR_kwDOJ9k5Is5jBQNc",
      "number": 23,
      "title": "Add required dependencies to README",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2024-01-01T21:23:23Z",
      "updated_at": "2024-01-03T11:20:58Z",
      "closed_at": null,
      "author_association": "FIRST_TIME_CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/23",
        "html_url": "https://github.com/damus-io/nostrdb/pull/23",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/23.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/23.patch",
        "merged_at": null
      },
      "body": "fixes #22 \r\n\r\n~3 _required_ dependencies are missing to be able to install the project properly.~\r\n\r\nAs for Mac OS (In my case Sonoma), I have to write `byteswap.h` to `/usr/local/include/`\r\n\r\n```c\r\n#if defined(__APPLE__)\r\n// Mac OS X / Darwin features\r\n#include <libkern/OSByteOrder.h>\r\n#define bswap_16(x) OSSwapInt16(x)\r\n#define bswap_32(x) OSSwapInt32(x)\r\n#define bswap_64(x) OSSwapInt64(x)\r\n#endif\r\n```\r\n\r\nedit: 2 _required_ dependencies are needed to be able to install the project properly.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/23/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "eznix86",
      "created_at": "2024-01-02T11:36:20Z",
      "updated_at": "2024-01-02T11:36:20Z",
      "body": "@jb55 curl removed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/22",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/22",
      "id": 2061761832,
      "node_id": "PR_kwDOJ9k5Is5jBMZz",
      "number": 22,
      "title": "Specify build environment in readme",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2024-01-01T20:37:11Z",
      "updated_at": "2024-01-06T19:53:32Z",
      "closed_at": "2024-01-01T21:23:44Z",
      "author_association": "FIRST_TIME_CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/22",
        "html_url": "https://github.com/damus-io/nostrdb/pull/22",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/22.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/22.patch",
        "merged_at": null
      },
      "body": "Just tried on OSX, it fails, because of some dependencies are missing, so it's good to specify the environment",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/22",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/22",
      "id": 2061761832,
      "node_id": "PR_kwDOJ9k5Is5jBMZz",
      "number": 22,
      "title": "Specify build environment in readme",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2024-01-01T20:37:11Z",
      "updated_at": "2024-01-06T19:53:32Z",
      "closed_at": "2024-01-01T21:23:44Z",
      "author_association": "FIRST_TIME_CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/22",
        "html_url": "https://github.com/damus-io/nostrdb/pull/22",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/22.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/22.patch",
        "merged_at": null
      },
      "body": "Just tried on OSX, it fails, because of some dependencies are missing, so it's good to specify the environment",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2024-01-01T20:55:29Z",
      "updated_at": "2024-01-01T20:55:29Z",
      "body": "It builds fine on macos for me?\n\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/22",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/22",
      "id": 2061761832,
      "node_id": "PR_kwDOJ9k5Is5jBMZz",
      "number": 22,
      "title": "Specify build environment in readme",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2024-01-01T20:37:11Z",
      "updated_at": "2024-01-06T19:53:32Z",
      "closed_at": "2024-01-01T21:23:44Z",
      "author_association": "FIRST_TIME_CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/22",
        "html_url": "https://github.com/damus-io/nostrdb/pull/22",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/22.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/22.patch",
        "merged_at": null
      },
      "body": "Just tried on OSX, it fails, because of some dependencies are missing, so it's good to specify the environment",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "eznix86",
      "created_at": "2024-01-01T20:59:33Z",
      "updated_at": "2024-01-01T20:59:33Z",
      "body": "So, some dependencies are missing. \r\n\r\nFirst issue I had is: byteswap.h missing. I had to copy paste it from a website."
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/22",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/22",
      "id": 2061761832,
      "node_id": "PR_kwDOJ9k5Is5jBMZz",
      "number": 22,
      "title": "Specify build environment in readme",
      "user": {
        "login": "eznix86",
        "id": 26553194,
        "node_id": "MDQ6VXNlcjI2NTUzMTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/26553194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eznix86",
        "html_url": "https://github.com/eznix86",
        "followers_url": "https://api.github.com/users/eznix86/followers",
        "following_url": "https://api.github.com/users/eznix86/following{/other_user}",
        "gists_url": "https://api.github.com/users/eznix86/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eznix86/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eznix86/subscriptions",
        "organizations_url": "https://api.github.com/users/eznix86/orgs",
        "repos_url": "https://api.github.com/users/eznix86/repos",
        "events_url": "https://api.github.com/users/eznix86/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eznix86/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2024-01-01T20:37:11Z",
      "updated_at": "2024-01-06T19:53:32Z",
      "closed_at": "2024-01-01T21:23:44Z",
      "author_association": "FIRST_TIME_CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/22",
        "html_url": "https://github.com/damus-io/nostrdb/pull/22",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/22.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/22.patch",
        "merged_at": null
      },
      "body": "Just tried on OSX, it fails, because of some dependencies are missing, so it's good to specify the environment",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/22/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2024-01-06T19:53:31Z",
      "updated_at": "2024-01-06T19:53:31Z",
      "body": "On Mon, Jan 01, 2024 at 12:59:43PM -0800, Bruno Bernard wrote:\n>So, some dependencies are missing.\n>\n>First issue I had is: byteswap.h missing. I had to copy paste it from a website.\n\nThis is fixed in e3cc896e25f68778401e5a87cb251290da2b062d\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/21",
      "id": 2022550514,
      "node_id": "PR_kwDOJ9k5Is5g_DE-",
      "number": 21,
      "title": "add \"import -\"",
      "user": {
        "login": "mattn",
        "id": 10111,
        "node_id": "MDQ6VXNlcjEwMTEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/10111?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mattn",
        "html_url": "https://github.com/mattn",
        "followers_url": "https://api.github.com/users/mattn/followers",
        "following_url": "https://api.github.com/users/mattn/following{/other_user}",
        "gists_url": "https://api.github.com/users/mattn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mattn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mattn/subscriptions",
        "organizations_url": "https://api.github.com/users/mattn/orgs",
        "repos_url": "https://api.github.com/users/mattn/repos",
        "events_url": "https://api.github.com/users/mattn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mattn/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 5,
      "created_at": "2023-12-03T14:39:05Z",
      "updated_at": "2023-12-13T19:58:02Z",
      "closed_at": "2023-12-13T19:58:02Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/21",
        "html_url": "https://github.com/damus-io/nostrdb/pull/21",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/21.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/21.patch",
        "merged_at": null
      },
      "body": "This is very experimental feature but ndb search should be possible to used while ndb import.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/21",
      "id": 2022550514,
      "node_id": "PR_kwDOJ9k5Is5g_DE-",
      "number": 21,
      "title": "add \"import -\"",
      "user": {
        "login": "mattn",
        "id": 10111,
        "node_id": "MDQ6VXNlcjEwMTEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/10111?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mattn",
        "html_url": "https://github.com/mattn",
        "followers_url": "https://api.github.com/users/mattn/followers",
        "following_url": "https://api.github.com/users/mattn/following{/other_user}",
        "gists_url": "https://api.github.com/users/mattn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mattn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mattn/subscriptions",
        "organizations_url": "https://api.github.com/users/mattn/orgs",
        "repos_url": "https://api.github.com/users/mattn/repos",
        "events_url": "https://api.github.com/users/mattn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mattn/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 5,
      "created_at": "2023-12-03T14:39:05Z",
      "updated_at": "2023-12-13T19:58:02Z",
      "closed_at": "2023-12-13T19:58:02Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/21",
        "html_url": "https://github.com/damus-io/nostrdb/pull/21",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/21.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/21.patch",
        "merged_at": null
      },
      "body": "This is very experimental feature but ndb search should be possible to used while ndb import.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-12-04T18:32:44Z",
      "updated_at": "2023-12-04T18:32:44Z",
      "body": "On Sun, Dec 03, 2023 at 11:33:57PM +0900, Yasuhiro Matsumoto wrote:\n>--- a/nostrdb.c\n>+++ b/nostrdb.c\n>@@ -3410,6 +3410,72 @@ int _ndb_process_events(struct ndb *ndb, const char *ldjson, size_t json_len, in\n> \treturn 1;\n> }\n>\n>+static char *read_line(FILE *fp)\n>+{\n>+\tchar    *line = NULL;\n>+\tsize_t  maxlen = 0;\n>+\n>+\tfor(;;)\n>+\t{\n>+\t\tchar *sep, *block;\n>+\n>+\t\tmaxlen += BUFSIZ;\n>+\t\tline = realloc(line, maxlen + 1);\n>+\t\tif (line == NULL)\n>+\t\t\tbreak;\n>+\t\tblock = line + maxlen - BUFSIZ;\n>+\t\tif (fgets(block, BUFSIZ + 1, fp) == NULL)\n>+\t\t{\n>+\t\t\tif (block == line)\n>+\t\t\t{\n>+\t\t\t\tfree(line);\n>+\t\t\t\tline = NULL;\n>+\t\t\t}\n>+\t\t\tbreak;\n>+\t\t}\n>+\t\tsep = strchr(block, '\\n');\n>+\t\tif (sep != NULL)\n>+\t\t{\n>+\t\t\t*sep = 0x0;\n>+\t\t\tif (sep != block)\n>+\t\t\t{\n>+\t\t\t\tif ('\\r' == *(--sep))\n>+\t\t\t\t\t*sep = 0x0;\n>+\t\t\t}\n>+\t\t\tbreak;\n>+\t\t}\n>+\t}\n>+\treturn line;\n>+}\n>+\n>+int ndb_process_events_stream(struct ndb *ndb, FILE* fp)\n>+{\n>+#if DEBUG\n>+\tint processed = 0;\n>+#endif\n>+\n>+\twhile (!feof(fp)) {\n>+\t\tchar *line = read_line(fp);\n>+\t\tif (line == NULL)\n>+\t\t\tbreak;\n>+\t\tif (!ndb_process_event(ndb, line, strlen(line))) {\n>+\t\t\tndb_debug(\"ndb_process_event failed\\n\");\n>+\t\t\tfree(line);\n>+\t\t\treturn 0;\n>+\t\t}\n>+\t\tfree(line);\n>+#if DEBUG\n>+\t\tprocessed++;\n>+#endif\n>+\t}\n>+\n>+#if DEBUG\n>+\tndb_debug(\"ndb_process_events: processed %d events\\n\", processed);\n>+#endif\n>+\n>+\treturn 1;\n>+}\n\nWhy not just use \"getline\"?\n\nint ndb_process_events_stream(struct ndb *ndb, FILE* fp) {\n\tchar *line = NULL;\n\tsize_t len = 0;\n\tssize_t nread;\n\n\twhile ((nread = getline(&line, &len, stdin)) != -1) {\n\t\tif (line == NULL)\n\t\t\tbreak;\n\t\tndb_process_event(ndb, line, strlen(line));\n\t}\n\n\tif (line)\n\t\tfree(line);\n}\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/21",
      "id": 2022550514,
      "node_id": "PR_kwDOJ9k5Is5g_DE-",
      "number": 21,
      "title": "add \"import -\"",
      "user": {
        "login": "mattn",
        "id": 10111,
        "node_id": "MDQ6VXNlcjEwMTEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/10111?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mattn",
        "html_url": "https://github.com/mattn",
        "followers_url": "https://api.github.com/users/mattn/followers",
        "following_url": "https://api.github.com/users/mattn/following{/other_user}",
        "gists_url": "https://api.github.com/users/mattn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mattn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mattn/subscriptions",
        "organizations_url": "https://api.github.com/users/mattn/orgs",
        "repos_url": "https://api.github.com/users/mattn/repos",
        "events_url": "https://api.github.com/users/mattn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mattn/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 5,
      "created_at": "2023-12-03T14:39:05Z",
      "updated_at": "2023-12-13T19:58:02Z",
      "closed_at": "2023-12-13T19:58:02Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/21",
        "html_url": "https://github.com/damus-io/nostrdb/pull/21",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/21.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/21.patch",
        "merged_at": null
      },
      "body": "This is very experimental feature but ndb search should be possible to used while ndb import.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-12-04T18:33:11Z",
      "updated_at": "2023-12-04T18:33:11Z",
      "body": "On Sun, Dec 03, 2023 at 11:38:41PM +0900, Yasuhiro Matsumoto wrote:\n>---\n> nostrdb.c | 2 +-\n> 1 file changed, 1 insertion(+), 1 deletion(-)\n>\n>diff --git a/nostrdb.c b/nostrdb.c\n>index b8db79d..b14ffac 100644\n>--- a/nostrdb.c\n>+++ b/nostrdb.c\n>@@ -3470,7 +3470,7 @@ int ndb_process_events_stream(struct ndb *ndb, FILE* fp)\n> \t}\n>\n> #if DEBUG\n>-\tndb_debug(\"ndb_process_events: processed %d events\\n\", processed);\n>+\tndb_debug(\"ndb_process_events_stream: processed %d events\\n\", processed);\n> #endif\n>\n> \treturn 1;\n\nyou can just squash this into the first patch\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/21",
      "id": 2022550514,
      "node_id": "PR_kwDOJ9k5Is5g_DE-",
      "number": 21,
      "title": "add \"import -\"",
      "user": {
        "login": "mattn",
        "id": 10111,
        "node_id": "MDQ6VXNlcjEwMTEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/10111?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mattn",
        "html_url": "https://github.com/mattn",
        "followers_url": "https://api.github.com/users/mattn/followers",
        "following_url": "https://api.github.com/users/mattn/following{/other_user}",
        "gists_url": "https://api.github.com/users/mattn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mattn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mattn/subscriptions",
        "organizations_url": "https://api.github.com/users/mattn/orgs",
        "repos_url": "https://api.github.com/users/mattn/repos",
        "events_url": "https://api.github.com/users/mattn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mattn/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 5,
      "created_at": "2023-12-03T14:39:05Z",
      "updated_at": "2023-12-13T19:58:02Z",
      "closed_at": "2023-12-13T19:58:02Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/21",
        "html_url": "https://github.com/damus-io/nostrdb/pull/21",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/21.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/21.patch",
        "merged_at": null
      },
      "body": "This is very experimental feature but ndb search should be possible to used while ndb import.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "mattn",
      "created_at": "2023-12-05T02:11:23Z",
      "updated_at": "2023-12-05T02:11:23Z",
      "body": "sure."
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/21",
      "id": 2022550514,
      "node_id": "PR_kwDOJ9k5Is5g_DE-",
      "number": 21,
      "title": "add \"import -\"",
      "user": {
        "login": "mattn",
        "id": 10111,
        "node_id": "MDQ6VXNlcjEwMTEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/10111?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mattn",
        "html_url": "https://github.com/mattn",
        "followers_url": "https://api.github.com/users/mattn/followers",
        "following_url": "https://api.github.com/users/mattn/following{/other_user}",
        "gists_url": "https://api.github.com/users/mattn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mattn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mattn/subscriptions",
        "organizations_url": "https://api.github.com/users/mattn/orgs",
        "repos_url": "https://api.github.com/users/mattn/repos",
        "events_url": "https://api.github.com/users/mattn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mattn/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 5,
      "created_at": "2023-12-03T14:39:05Z",
      "updated_at": "2023-12-13T19:58:02Z",
      "closed_at": "2023-12-13T19:58:02Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/21",
        "html_url": "https://github.com/damus-io/nostrdb/pull/21",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/21.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/21.patch",
        "merged_at": null
      },
      "body": "This is very experimental feature but ndb search should be possible to used while ndb import.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "mattn",
      "created_at": "2023-12-05T02:12:29Z",
      "updated_at": "2023-12-05T02:12:29Z",
      "body": "BTW, Why ndb accept three element items? `[\"EVENT\", \"s\", {...}]` "
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/21",
      "id": 2022550514,
      "node_id": "PR_kwDOJ9k5Is5g_DE-",
      "number": 21,
      "title": "add \"import -\"",
      "user": {
        "login": "mattn",
        "id": 10111,
        "node_id": "MDQ6VXNlcjEwMTEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/10111?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mattn",
        "html_url": "https://github.com/mattn",
        "followers_url": "https://api.github.com/users/mattn/followers",
        "following_url": "https://api.github.com/users/mattn/following{/other_user}",
        "gists_url": "https://api.github.com/users/mattn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mattn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mattn/subscriptions",
        "organizations_url": "https://api.github.com/users/mattn/orgs",
        "repos_url": "https://api.github.com/users/mattn/repos",
        "events_url": "https://api.github.com/users/mattn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mattn/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 5,
      "created_at": "2023-12-03T14:39:05Z",
      "updated_at": "2023-12-13T19:58:02Z",
      "closed_at": "2023-12-13T19:58:02Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/21",
        "html_url": "https://github.com/damus-io/nostrdb/pull/21",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/21.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/21.patch",
        "merged_at": null
      },
      "body": "This is very experimental feature but ndb search should be possible to used while ndb import.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/21/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-12-05T18:56:09Z",
      "updated_at": "2023-12-05T18:56:09Z",
      "body": "On Mon, Dec 04, 2023 at 06:12:39PM -0800, mattn wrote:\n>BTW, Why ndb accept three element items? `[\"EVENT\", \"s\", {...}]`\n\noriginally nostrdb was designed as a client for consuming events from\nrelays, so this is the format relays returned results to be ingested\ninto nostrdb.\n\nThese days it's a bit of a client/relay hybrid, so we should probably\njust have a bare note import, or at least an ingester that supports\nevents of all kinds:\n\n[\"EVENT\", {}]\n[\"EVENT\", \"subid\", {}]\n{}\n\nIt's something I will improve in the future.\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/20",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/20",
      "id": 2022502911,
      "node_id": "PR_kwDOJ9k5Is5g-5bf",
      "number": 20,
      "title": "Update",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2023-12-03T12:40:24Z",
      "updated_at": "2023-12-03T12:41:32Z",
      "closed_at": "2023-12-03T12:40:54Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/20",
        "html_url": "https://github.com/damus-io/nostrdb/pull/20",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/20.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/20.patch",
        "merged_at": null
      },
      "body": null,
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/20",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/20",
      "id": 2022502911,
      "node_id": "PR_kwDOJ9k5Is5g-5bf",
      "number": 20,
      "title": "Update",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2023-12-03T12:40:24Z",
      "updated_at": "2023-12-03T12:41:32Z",
      "closed_at": "2023-12-03T12:40:54Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/20",
        "html_url": "https://github.com/damus-io/nostrdb/pull/20",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/20.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/20.patch",
        "merged_at": null
      },
      "body": null,
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/20/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "Hakkadaikon",
      "created_at": "2023-12-03T12:41:31Z",
      "updated_at": "2023-12-03T12:41:31Z",
      "body": "Sorry, it's a mistake."
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/19",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/19/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/19/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/19/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/19",
      "id": 2021471954,
      "node_id": "I_kwDOJ9k5Is54fTbS",
      "number": 19,
      "title": "Link error : pthread",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 0,
      "created_at": "2023-12-01T19:36:39Z",
      "updated_at": "2023-12-01T19:36:39Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "Hi,\r\nWhen I built nostrdb, the following link error occurred.\r\n\r\n```bash\r\n$ make clean; make\r\nrm -rf test bench bench-ingest bench-ingest-many\r\ncc -Wall -Wno-misleading-indentation -Wno-unused-function -Werror -O2 -g -Ideps/secp256k1/include -Ideps/lmdb -Ideps/flatcc/include bench.c nostrdb.c sha256.c bech32.c deps/flatcc/src/runtime/json_parser.c deps/flatcc/src/runtime/verifier.c deps/flatcc/src/runtime/builder.c deps/flatcc/src/runtime/emitter.c deps/flatcc/src/runtime/refmap.c deps/lmdb/liblmdb.a deps/secp256k1/.libs/libsecp256k1.a  -o bench\r\n/usr/bin/ld: deps/lmdb/liblmdb.a(mdb.o): in function `mdb_txn_renew0':\r\n/home/hakkadaikon/repos/hakkadaikon/nostrdb/deps/lmdb/mdb.c:2719: undefined reference to `pthread_getspecific'\r\n/usr/bin/ld: /home/hakkadaikon/repos/hakkadaikon/nostrdb/deps/lmdb/mdb.c:2762: undefined reference to `pthread_setspecific'\r\n/usr/bin/ld: deps/lmdb/liblmdb.a(mdb.o): in function `mdb_env_copythr':\r\n/home/hakkadaikon/repos/hakkadaikon/nostrdb/deps/lmdb/mdb.c:9126: undefined reference to `pthread_sigmask'\r\n～\r\ncollect2: error: ld returned 1 exit status\r\nmake: *** [Makefile:137: bench] Error 1\r\n```\r\n\r\nThe problem was resolved by changing nostrdb/Makefile as follows.\r\n\r\n```diff\r\n--- a/Makefile\r\n+++ b/Makefile\r\n@@ -2,7 +2,7 @@ CFLAGS = -Wall -Wno-misleading-indentation -Wno-unused-function -Werror -O2 -g -\r\n HEADERS = sha256.h nostrdb.h cursor.h hex.h jsmn.h config.h sha256.h random.h memchr.h $(C_BINDINGS)\r\n FLATCC_SRCS=deps/flatcc/src/runtime/json_parser.c deps/flatcc/src/runtime/verifier.c deps/flatcc/src/runtime/builder.c deps/flatcc/src/runtime/emitter.c deps/flatcc/src/runtime/refmap.c\r\n SRCS = nostrdb.c sha256.c bech32.c $(FLATCC_SRCS)\r\n-LDS = $(SRCS) $(ARS) \r\n+LDS = $(SRCS) $(ARS) -lpthread\r\n DEPS = $(SRCS) $(HEADERS) $(ARS)\r\n ARS = deps/lmdb/liblmdb.a deps/secp256k1/.libs/libsecp256k1.a \r\n LMDB_VER=0.9.31\r\n```\r\n\r\nI'm using Ubuntu 20.04.\r\n```bash\r\ncat /etc/lsb-release\r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=20.04\r\nDISTRIB_CODENAME=focal\r\nDISTRIB_DESCRIPTION=\"Ubuntu 20.04.2 LTS\"\r\n```\r\n\r\n",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/19/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/19/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/18",
      "id": 2021354427,
      "node_id": "PR_kwDOJ9k5Is5g7Jbr",
      "number": 18,
      "title": "Delete unuse argument (destsize)",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 7,
      "created_at": "2023-12-01T18:04:55Z",
      "updated_at": "2023-12-01T21:58:12Z",
      "closed_at": "2023-12-01T21:58:12Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/18",
        "html_url": "https://github.com/damus-io/nostrdb/pull/18",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/18.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/18.patch",
        "merged_at": null
      },
      "body": "Hi !\r\nI'm hakkadaikon. (npub: npub1zqdnpm5gcfap8hngha7gcp3k363786phvs2etsvxw4nh6x9ydfzsuyk6mn)\r\n\r\nI added this because there was no destsize check in the hex_encode method.\r\nPlease check. 🙏",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/18",
      "id": 2021354427,
      "node_id": "PR_kwDOJ9k5Is5g7Jbr",
      "number": 18,
      "title": "Delete unuse argument (destsize)",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 7,
      "created_at": "2023-12-01T18:04:55Z",
      "updated_at": "2023-12-01T21:58:12Z",
      "closed_at": "2023-12-01T21:58:12Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/18",
        "html_url": "https://github.com/damus-io/nostrdb/pull/18",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/18.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/18.patch",
        "merged_at": null
      },
      "body": "Hi !\r\nI'm hakkadaikon. (npub: npub1zqdnpm5gcfap8hngha7gcp3k363786phvs2etsvxw4nh6x9ydfzsuyk6mn)\r\n\r\nI added this because there was no destsize check in the hex_encode method.\r\nPlease check. 🙏",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-12-01T18:17:16Z",
      "updated_at": "2023-12-01T18:17:16Z",
      "body": "we don't ever use this function with unknown destination sizes, is there\na specific issue you're trying to fix here?\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/18",
      "id": 2021354427,
      "node_id": "PR_kwDOJ9k5Is5g7Jbr",
      "number": 18,
      "title": "Delete unuse argument (destsize)",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 7,
      "created_at": "2023-12-01T18:04:55Z",
      "updated_at": "2023-12-01T21:58:12Z",
      "closed_at": "2023-12-01T21:58:12Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/18",
        "html_url": "https://github.com/damus-io/nostrdb/pull/18",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/18.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/18.patch",
        "merged_at": null
      },
      "body": "Hi !\r\nI'm hakkadaikon. (npub: npub1zqdnpm5gcfap8hngha7gcp3k363786phvs2etsvxw4nh6x9ydfzsuyk6mn)\r\n\r\nI added this because there was no destsize check in the hex_encode method.\r\nPlease check. 🙏",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "Hakkadaikon",
      "created_at": "2023-12-01T18:30:25Z",
      "updated_at": "2023-12-01T18:30:36Z",
      "body": "> we don't ever use this function with unknown destination sizes\r\n\r\nI thought I meant to detect a buffer overflow on the destination size, since the destination size is passed as an argument and is not used.\r\n\r\nIf destsize is just being passed for future use, this may not be necessary."
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/18",
      "id": 2021354427,
      "node_id": "PR_kwDOJ9k5Is5g7Jbr",
      "number": 18,
      "title": "Delete unuse argument (destsize)",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 7,
      "created_at": "2023-12-01T18:04:55Z",
      "updated_at": "2023-12-01T21:58:12Z",
      "closed_at": "2023-12-01T21:58:12Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/18",
        "html_url": "https://github.com/damus-io/nostrdb/pull/18",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/18.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/18.patch",
        "merged_at": null
      },
      "body": "Hi !\r\nI'm hakkadaikon. (npub: npub1zqdnpm5gcfap8hngha7gcp3k363786phvs2etsvxw4nh6x9ydfzsuyk6mn)\r\n\r\nI added this because there was no destsize check in the hex_encode method.\r\nPlease check. 🙏",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-12-01T18:31:59Z",
      "updated_at": "2023-12-01T18:31:59Z",
      "body": "On Fri, Dec 01, 2023 at 10:30:36AM -0800, Hakkadaikon wrote:\n>> we don't ever use this function with unknown destination sizes\n>\n>If destsize is just being passed for future use, this may not be necessary.\n\noh we can remove destsize if we're not using it\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/18",
      "id": 2021354427,
      "node_id": "PR_kwDOJ9k5Is5g7Jbr",
      "number": 18,
      "title": "Delete unuse argument (destsize)",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 7,
      "created_at": "2023-12-01T18:04:55Z",
      "updated_at": "2023-12-01T21:58:12Z",
      "closed_at": "2023-12-01T21:58:12Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/18",
        "html_url": "https://github.com/damus-io/nostrdb/pull/18",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/18.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/18.patch",
        "merged_at": null
      },
      "body": "Hi !\r\nI'm hakkadaikon. (npub: npub1zqdnpm5gcfap8hngha7gcp3k363786phvs2etsvxw4nh6x9ydfzsuyk6mn)\r\n\r\nI added this because there was no destsize check in the hex_encode method.\r\nPlease check. 🙏",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "Hakkadaikon",
      "created_at": "2023-12-01T18:35:55Z",
      "updated_at": "2023-12-01T18:35:55Z",
      "body": "OK, I'll create a \"new pull request with destsize removed\"."
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/18",
      "id": 2021354427,
      "node_id": "PR_kwDOJ9k5Is5g7Jbr",
      "number": 18,
      "title": "Delete unuse argument (destsize)",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 7,
      "created_at": "2023-12-01T18:04:55Z",
      "updated_at": "2023-12-01T21:58:12Z",
      "closed_at": "2023-12-01T21:58:12Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/18",
        "html_url": "https://github.com/damus-io/nostrdb/pull/18",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/18.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/18.patch",
        "merged_at": null
      },
      "body": "Hi !\r\nI'm hakkadaikon. (npub: npub1zqdnpm5gcfap8hngha7gcp3k363786phvs2etsvxw4nh6x9ydfzsuyk6mn)\r\n\r\nI added this because there was no destsize check in the hex_encode method.\r\nPlease check. 🙏",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-12-01T18:50:15Z",
      "updated_at": "2023-12-01T18:50:15Z",
      "body": "On Fri, Dec 01, 2023 at 10:36:06AM -0800, Hakkadaikon wrote:\n>OK, I'll create a \"new pull request with destsize removed\".\n\nyou can just update this one as well if you want \n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/18",
      "id": 2021354427,
      "node_id": "PR_kwDOJ9k5Is5g7Jbr",
      "number": 18,
      "title": "Delete unuse argument (destsize)",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 7,
      "created_at": "2023-12-01T18:04:55Z",
      "updated_at": "2023-12-01T21:58:12Z",
      "closed_at": "2023-12-01T21:58:12Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/18",
        "html_url": "https://github.com/damus-io/nostrdb/pull/18",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/18.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/18.patch",
        "merged_at": null
      },
      "body": "Hi !\r\nI'm hakkadaikon. (npub: npub1zqdnpm5gcfap8hngha7gcp3k363786phvs2etsvxw4nh6x9ydfzsuyk6mn)\r\n\r\nI added this because there was no destsize check in the hex_encode method.\r\nPlease check. 🙏",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "Hakkadaikon",
      "created_at": "2023-12-01T19:14:34Z",
      "updated_at": "2023-12-01T19:14:34Z",
      "body": "> you can just update this one as well if you want\r\n\r\nHi,\r\nI have changed the title and modification details of this pull request. (Unused variable: destsize removed.)\r\nPlease check.🙏\r\n\r\nAlso, hex_encode was only used in one place."
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/18",
      "id": 2021354427,
      "node_id": "PR_kwDOJ9k5Is5g7Jbr",
      "number": 18,
      "title": "Delete unuse argument (destsize)",
      "user": {
        "login": "Hakkadaikon",
        "id": 57866935,
        "node_id": "MDQ6VXNlcjU3ODY2OTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/57866935?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hakkadaikon",
        "html_url": "https://github.com/Hakkadaikon",
        "followers_url": "https://api.github.com/users/Hakkadaikon/followers",
        "following_url": "https://api.github.com/users/Hakkadaikon/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hakkadaikon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hakkadaikon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hakkadaikon/subscriptions",
        "organizations_url": "https://api.github.com/users/Hakkadaikon/orgs",
        "repos_url": "https://api.github.com/users/Hakkadaikon/repos",
        "events_url": "https://api.github.com/users/Hakkadaikon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hakkadaikon/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 7,
      "created_at": "2023-12-01T18:04:55Z",
      "updated_at": "2023-12-01T21:58:12Z",
      "closed_at": "2023-12-01T21:58:12Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/18",
        "html_url": "https://github.com/damus-io/nostrdb/pull/18",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/18.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/18.patch",
        "merged_at": null
      },
      "body": "Hi !\r\nI'm hakkadaikon. (npub: npub1zqdnpm5gcfap8hngha7gcp3k363786phvs2etsvxw4nh6x9ydfzsuyk6mn)\r\n\r\nI added this because there was no destsize check in the hex_encode method.\r\nPlease check. 🙏",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/18/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-12-01T21:57:59Z",
      "updated_at": "2023-12-01T21:57:59Z",
      "body": "Thanks!\n\nReviewed-by: William Casarin ***@***.***>\n\nOn Sat, Dec 02, 2023 at 02:52:14AM +0900, hakkadaikon wrote:\n>Closes: https://github.com/damus-io/nostrdb/pull/18\n>---\n> hex.h     | 2 +-\n> nostrdb.c | 2 +-\n> 2 files changed, 2 insertions(+), 2 deletions(-)\n>\n>diff --git a/hex.h b/hex.h\n>index 88000a7..ce20ff4 100644\n>--- a/hex.h\n>+++ b/hex.h\n>@@ -50,7 +50,7 @@ static inline char hexchar(unsigned int val)\n> \tabort();\n> }\n>\n>-static int hex_encode(const void *buf, size_t bufsize, char *dest, size_t destsize)\n>+static int hex_encode(const void *buf, size_t bufsize, char *dest)\n> {\n> \tsize_t i;\n>\n>diff --git a/nostrdb.c b/nostrdb.c\n>index d973b67..2a8451f 100644\n>--- a/nostrdb.c\n>+++ b/nostrdb.c\n>@@ -3616,7 +3616,7 @@ static int ndb_event_commitment(struct ndb_note *ev, unsigned char *buf, int buf\n> \tstruct cursor cur;\n> \tint ok;\n>\n>-\tif (!hex_encode(ev->pubkey, sizeof(ev->pubkey), pubkey, sizeof(pubkey)))\n>+\tif (!hex_encode(ev->pubkey, sizeof(ev->pubkey), pubkey))\n> \t\treturn 0;\n>\n> \tmake_cursor(buf, buf + buflen, &cur);\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/17",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/17",
      "id": 1891117168,
      "node_id": "I_kwDOJ9k5Is5wuChw",
      "number": 17,
      "title": "Consider Cap'n Proto optimizations",
      "user": {
        "login": "vRobM",
        "id": 2704733,
        "node_id": "MDQ6VXNlcjI3MDQ3MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2704733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vRobM",
        "html_url": "https://github.com/vRobM",
        "followers_url": "https://api.github.com/users/vRobM/followers",
        "following_url": "https://api.github.com/users/vRobM/following{/other_user}",
        "gists_url": "https://api.github.com/users/vRobM/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/vRobM/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/vRobM/subscriptions",
        "organizations_url": "https://api.github.com/users/vRobM/orgs",
        "repos_url": "https://api.github.com/users/vRobM/repos",
        "events_url": "https://api.github.com/users/vRobM/events{/privacy}",
        "received_events_url": "https://api.github.com/users/vRobM/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2023-09-11T19:17:41Z",
      "updated_at": "2023-12-01T18:39:49Z",
      "closed_at": "2023-12-01T18:39:49Z",
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "Since you're familiar with flatbuffers.. ;-)",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/17",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/17",
      "id": 1891117168,
      "node_id": "I_kwDOJ9k5Is5wuChw",
      "number": 17,
      "title": "Consider Cap'n Proto optimizations",
      "user": {
        "login": "vRobM",
        "id": 2704733,
        "node_id": "MDQ6VXNlcjI3MDQ3MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2704733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vRobM",
        "html_url": "https://github.com/vRobM",
        "followers_url": "https://api.github.com/users/vRobM/followers",
        "following_url": "https://api.github.com/users/vRobM/following{/other_user}",
        "gists_url": "https://api.github.com/users/vRobM/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/vRobM/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/vRobM/subscriptions",
        "organizations_url": "https://api.github.com/users/vRobM/orgs",
        "repos_url": "https://api.github.com/users/vRobM/repos",
        "events_url": "https://api.github.com/users/vRobM/events{/privacy}",
        "received_events_url": "https://api.github.com/users/vRobM/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2023-09-11T19:17:41Z",
      "updated_at": "2023-12-01T18:39:49Z",
      "closed_at": "2023-12-01T18:39:49Z",
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "Since you're familiar with flatbuffers.. ;-)",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-09-11T20:36:08Z",
      "updated_at": "2023-09-11T20:36:08Z",
      "body": "On Mon, Sep 11, 2023 at 12:17:51PM -0700, Rob wrote:\n>Since you're familiar with flatbuffers.. ;-)\n\nI'm not set on flatbuffers, it's just what I'm using right now. I was\nlooking at the capn' proto comparison to flatbuffers the other day and\nthere doesn't seem that much difference that is relevant to nostrdb. do\nyou have something specific in mind?\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/17",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/17",
      "id": 1891117168,
      "node_id": "I_kwDOJ9k5Is5wuChw",
      "number": 17,
      "title": "Consider Cap'n Proto optimizations",
      "user": {
        "login": "vRobM",
        "id": 2704733,
        "node_id": "MDQ6VXNlcjI3MDQ3MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2704733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vRobM",
        "html_url": "https://github.com/vRobM",
        "followers_url": "https://api.github.com/users/vRobM/followers",
        "following_url": "https://api.github.com/users/vRobM/following{/other_user}",
        "gists_url": "https://api.github.com/users/vRobM/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/vRobM/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/vRobM/subscriptions",
        "organizations_url": "https://api.github.com/users/vRobM/orgs",
        "repos_url": "https://api.github.com/users/vRobM/repos",
        "events_url": "https://api.github.com/users/vRobM/events{/privacy}",
        "received_events_url": "https://api.github.com/users/vRobM/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2023-09-11T19:17:41Z",
      "updated_at": "2023-12-01T18:39:49Z",
      "closed_at": "2023-12-01T18:39:49Z",
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "Since you're familiar with flatbuffers.. ;-)",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    },
    "comment": {
      "user": "vRobM",
      "created_at": "2023-09-11T21:21:22Z",
      "updated_at": "2023-09-11T21:21:22Z",
      "body": "Understood.\r\n\r\nNot an expert on it, so on the surface yes, fairly similar, however it's a pretty deep subject depending on which layer you look at which can be optimized.\r\n\r\nNot sure what the data format considerations are in nostrdb, for example the binary data format would be more compact compared to JSON. How that would affect KV needs or other transformations & manipulations IDK. Depends where the overhead is acceptable. \r\n\r\nhttps://www.youtube.com/watch?v=6V_lVZzV6AE \r\nThis guy delves into the depths of Cap'n Proto which may provide useful perspectives, however limited to the example app he builds.\r\n\r\nA learning opportunity for sure, and we can connect with Kenton who designed it if desired."
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/17",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/17",
      "id": 1891117168,
      "node_id": "I_kwDOJ9k5Is5wuChw",
      "number": 17,
      "title": "Consider Cap'n Proto optimizations",
      "user": {
        "login": "vRobM",
        "id": 2704733,
        "node_id": "MDQ6VXNlcjI3MDQ3MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2704733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vRobM",
        "html_url": "https://github.com/vRobM",
        "followers_url": "https://api.github.com/users/vRobM/followers",
        "following_url": "https://api.github.com/users/vRobM/following{/other_user}",
        "gists_url": "https://api.github.com/users/vRobM/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/vRobM/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/vRobM/subscriptions",
        "organizations_url": "https://api.github.com/users/vRobM/orgs",
        "repos_url": "https://api.github.com/users/vRobM/repos",
        "events_url": "https://api.github.com/users/vRobM/events{/privacy}",
        "received_events_url": "https://api.github.com/users/vRobM/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2023-09-11T19:17:41Z",
      "updated_at": "2023-12-01T18:39:49Z",
      "closed_at": "2023-12-01T18:39:49Z",
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "Since you're familiar with flatbuffers.. ;-)",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/17/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-12-01T18:39:49Z",
      "updated_at": "2023-12-01T18:39:49Z",
      "body": "closing this until we have some specific thing we are trying to optimize for"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/16",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/16/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/16/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/16/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/16",
      "id": 1878171607,
      "node_id": "PR_kwDOJ9k5Is5ZYQrs",
      "number": 16,
      "title": "Create README.md",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 0,
      "created_at": "2023-09-01T23:35:29Z",
      "updated_at": "2023-12-04T22:39:25Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/16",
        "html_url": "https://github.com/damus-io/nostrdb/pull/16",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/16.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/16.patch",
        "merged_at": null
      },
      "body": "Create README.md for the fuzzer since nobody reads the patch notes.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/16/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/16/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/15",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/15",
      "id": 1878169050,
      "node_id": "PR_kwDOJ9k5Is5ZYQGn",
      "number": 15,
      "title": "Create simple_fuzzer.c",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2023-09-01T23:32:54Z",
      "updated_at": "2023-09-27T17:24:39Z",
      "closed_at": "2023-09-27T17:24:35Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/15",
        "html_url": "https://github.com/damus-io/nostrdb/pull/15",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/15.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/15.patch",
        "merged_at": null
      },
      "body": "simple and inefficient AFL fuzzer for nostrdb\r\nresponsible for finding\r\n 1x global buffer overflow\r\n 1x Floating Point Exception (div by zero)\r\n 1x Assertion failure\r\n \r\nHow to use it yourself:\r\n1. Install Clang 14+\r\n2. Install LLVM 14+\r\n3. Install AFL++\r\n4. Then...\r\n AFL_USE_ASAN=1 afl-clang-lto -flto=full -fsanitize=address -Wall -Wno-unused-function -Werror -O2 -g -Ideps/secp256k1/include -Ideps/lmdb -Ideps/flatcc/include fuzzer.c nostrdb.c sha256.c deps/flatcc/src/runtime/json_parser.c deps/flatcc/src/runtime/builder.c deps/flatcc/src/runtime/emitter.c deps/flatcc/src/runtime/refmap.c deps/lmdb/liblmdb.a deps/secp256k1/.libs/libsecp256k1.a -o fuzzer\r\n5. create an input directory drop some sort of starting corpus. i chose blns.txt because it rocks. \r\n6. afl-fuzz -i $input -o $output -- ./fuzzer \r\n \r\n![image](https://github.com/damus-io/nostrdb/assets/466878/d29e5db8-4bfc-4e4b-8e71-67ddfc4b6537)\r\n\r\n",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/15",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/15",
      "id": 1878169050,
      "node_id": "PR_kwDOJ9k5Is5ZYQGn",
      "number": 15,
      "title": "Create simple_fuzzer.c",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2023-09-01T23:32:54Z",
      "updated_at": "2023-09-27T17:24:39Z",
      "closed_at": "2023-09-27T17:24:35Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/15",
        "html_url": "https://github.com/damus-io/nostrdb/pull/15",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/15.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/15.patch",
        "merged_at": null
      },
      "body": "simple and inefficient AFL fuzzer for nostrdb\r\nresponsible for finding\r\n 1x global buffer overflow\r\n 1x Floating Point Exception (div by zero)\r\n 1x Assertion failure\r\n \r\nHow to use it yourself:\r\n1. Install Clang 14+\r\n2. Install LLVM 14+\r\n3. Install AFL++\r\n4. Then...\r\n AFL_USE_ASAN=1 afl-clang-lto -flto=full -fsanitize=address -Wall -Wno-unused-function -Werror -O2 -g -Ideps/secp256k1/include -Ideps/lmdb -Ideps/flatcc/include fuzzer.c nostrdb.c sha256.c deps/flatcc/src/runtime/json_parser.c deps/flatcc/src/runtime/builder.c deps/flatcc/src/runtime/emitter.c deps/flatcc/src/runtime/refmap.c deps/lmdb/liblmdb.a deps/secp256k1/.libs/libsecp256k1.a -o fuzzer\r\n5. create an input directory drop some sort of starting corpus. i chose blns.txt because it rocks. \r\n6. afl-fuzz -i $input -o $output -- ./fuzzer \r\n \r\n![image](https://github.com/damus-io/nostrdb/assets/466878/d29e5db8-4bfc-4e4b-8e71-67ddfc4b6537)\r\n\r\n",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/15/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-09-02T01:00:10Z",
      "updated_at": "2023-09-02T01:00:10Z",
      "body": "Hey! Few comments below.\n\nOn Fri, Sep 01, 2023 at 11:29:04PM +0000, geeknik wrote:\n>simple and inefficient AFL fuzzer for nostrdb\n>responsible for finding\n> 1x global buffer overflow\n> 1x Floating Point Exception (div by zero)\n> 1x Assertion failure\n>\n>Closes: https://github.com/damus-io/nostrdb/pull/15\n>---\n> fuzzer/simple_fuzzer.c | 35 +++++++++++++++++++++++++++++++++++\n> 1 file changed, 35 insertions(+)\n> create mode 100644 fuzzer/simple_fuzzer.c\n>\n>diff --git a/fuzzer/simple_fuzzer.c b/fuzzer/simple_fuzzer.c\n>new file mode 100644\n>index 0000000..f436aa1\n>--- /dev/null\n>+++ b/fuzzer/simple_fuzzer.c\n>\n>[..]\n> \n>+__AFL_FUZZ_INIT();\n>+\n>+int main(void) {\n>+    while (__AFL_LOOP(1000000)) {\n>+        unsigned char *buf = __AFL_FUZZ_TESTCASE_BUF;\n>+        size_t len = __AFL_FUZZ_TESTCASE_LEN;\n>+        struct ndb *db;\n>+        int init_result = ndb_init(&db, 1024, 1);\n\nThis opens and closes the DB 1,000,000 times. is this intended?\n\n>+        if (init_result != 1) {\n>+            fprintf(stderr, \"Failed to initialize nostrdb\\n\");\n>+            continue;\n>+        }\n>+        int result = ndb_process_event(db, (const char *)buf, len);\n>+        if (result == 0) {\n>+            if (len >= 32) {\n>+                struct ndb_note *note = ndb_get_note_by_id(db, buf);\n>+                if (note != NULL) {\n>+                }\n>+            }\n>+        } else {\n>+        }\n\nWhy only lookup after failure to process the event? Confused by this logic.\n\n>+        ndb_destroy(db);\n>+    }\n>+    return 0;\n>+}\n\nWe should probably have a Makefile entry for building this.\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/14",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/14/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/14/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/14/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/14",
      "id": 1874256307,
      "node_id": "PR_kwDOJ9k5Is5ZK80y",
      "number": 14,
      "title": "Update LICENSE",
      "user": {
        "login": "punterwantsawhalepass",
        "id": 103547087,
        "node_id": "U_kgDOBiwAzw",
        "avatar_url": "https://avatars.githubusercontent.com/u/103547087?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/punterwantsawhalepass",
        "html_url": "https://github.com/punterwantsawhalepass",
        "followers_url": "https://api.github.com/users/punterwantsawhalepass/followers",
        "following_url": "https://api.github.com/users/punterwantsawhalepass/following{/other_user}",
        "gists_url": "https://api.github.com/users/punterwantsawhalepass/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/punterwantsawhalepass/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/punterwantsawhalepass/subscriptions",
        "organizations_url": "https://api.github.com/users/punterwantsawhalepass/orgs",
        "repos_url": "https://api.github.com/users/punterwantsawhalepass/repos",
        "events_url": "https://api.github.com/users/punterwantsawhalepass/events{/privacy}",
        "received_events_url": "https://api.github.com/users/punterwantsawhalepass/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 0,
      "created_at": "2023-08-30T19:34:40Z",
      "updated_at": "2023-12-01T18:42:46Z",
      "closed_at": "2023-12-01T18:42:46Z",
      "author_association": "NONE",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/14",
        "html_url": "https://github.com/damus-io/nostrdb/pull/14",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/14.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/14.patch",
        "merged_at": null
      },
      "body": null,
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/14/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/14/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/13",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/13",
      "id": 1856826372,
      "node_id": "I_kwDOJ9k5Is5urOwE",
      "number": 13,
      "title": "arm64: bench-many-ingest fails",
      "user": {
        "login": "IngwiePhoenix",
        "id": 2893716,
        "node_id": "MDQ6VXNlcjI4OTM3MTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2893716?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/IngwiePhoenix",
        "html_url": "https://github.com/IngwiePhoenix",
        "followers_url": "https://api.github.com/users/IngwiePhoenix/followers",
        "following_url": "https://api.github.com/users/IngwiePhoenix/following{/other_user}",
        "gists_url": "https://api.github.com/users/IngwiePhoenix/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/IngwiePhoenix/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/IngwiePhoenix/subscriptions",
        "organizations_url": "https://api.github.com/users/IngwiePhoenix/orgs",
        "repos_url": "https://api.github.com/users/IngwiePhoenix/repos",
        "events_url": "https://api.github.com/users/IngwiePhoenix/events{/privacy}",
        "received_events_url": "https://api.github.com/users/IngwiePhoenix/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2023-08-18T14:33:08Z",
      "updated_at": "2023-08-18T15:11:36Z",
      "closed_at": null,
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "This is the full output I get from GDB:\r\n\r\n```\r\nroot@FriendlyWrt /u/o/nostrdb (master)# ./bench-ingest-many\r\nfish: Job 1, './bench-ingest-many' terminated by signal SIGSEGV (Address boundary error)\r\nroot@FriendlyWrt /u/o/nostrdb (master) [SIGSEGV]# gdb ./bench-ingest-many\r\nGNU gdb (GDB) 11.2\r\nCopyright (C) 2022 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.\r\nType \"show copying\" and \"show warranty\" for details.\r\nThis GDB was configured as \"aarch64-openwrt-linux\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<https://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n    <http://www.gnu.org/software/gdb/documentation/>.\r\n\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from ./bench-ingest-many...\r\n(gdb) r\r\nStarting program: /usb/opt/nostrdb/bench-ingest-many\r\n[New LWP 31045]\r\n[New LWP 31046]\r\n[New LWP 31047]\r\n\r\nThread 2 \"bench-ingest-ma\" received signal SIGSEGV, Segmentation fault.\r\n[Switching to LWP 31045]\r\nprot_queue_pop_all (q=0xfffff7ffff68, q@entry=0xfffffffff1c0, dest=dest@entry=0xffff785c7a00, max_items=4096) at /usb/opt/nostrdb/protected_queue.h:186\r\n186             pthread_mutex_lock(&q->mutex);\r\n(gdb) bt\r\n#0  prot_queue_pop_all (q=0xfffff7ffff68, q@entry=0xfffffffff1c0, dest=dest@entry=0xffff785c7a00, max_items=4096) at /usb/opt/nostrdb/protected_queue.h:186\r\n#1  0x0000000000404778 in ndb_writer_thread (data=0xfffff7ffff48) at nostrdb.c:569\r\n#2  0x0000fffff7f9f124 in ?? () from /lib/ld-musl-aarch64.so.1\r\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\r\n(gdb) q\r\n```\r\n\r\nI built with \"make\", then \"make bench-ingest-many\" to build the binary, from a fully fresh and just-pulled (`git rev-parse HEAD: 1b389a869f8836af4cf80f5fe4c884817dfe47c3`) repo.\r\n\r\nI am on OpenWrt, ARM64 (RK3588).\r\n\r\nIs there something I can do to further dig into this?\r\n\r\nThanks!",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/13",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/13",
      "id": 1856826372,
      "node_id": "I_kwDOJ9k5Is5urOwE",
      "number": 13,
      "title": "arm64: bench-many-ingest fails",
      "user": {
        "login": "IngwiePhoenix",
        "id": 2893716,
        "node_id": "MDQ6VXNlcjI4OTM3MTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2893716?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/IngwiePhoenix",
        "html_url": "https://github.com/IngwiePhoenix",
        "followers_url": "https://api.github.com/users/IngwiePhoenix/followers",
        "following_url": "https://api.github.com/users/IngwiePhoenix/following{/other_user}",
        "gists_url": "https://api.github.com/users/IngwiePhoenix/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/IngwiePhoenix/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/IngwiePhoenix/subscriptions",
        "organizations_url": "https://api.github.com/users/IngwiePhoenix/orgs",
        "repos_url": "https://api.github.com/users/IngwiePhoenix/repos",
        "events_url": "https://api.github.com/users/IngwiePhoenix/events{/privacy}",
        "received_events_url": "https://api.github.com/users/IngwiePhoenix/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2023-08-18T14:33:08Z",
      "updated_at": "2023-08-18T15:11:36Z",
      "closed_at": null,
      "author_association": "NONE",
      "active_lock_reason": null,
      "body": "This is the full output I get from GDB:\r\n\r\n```\r\nroot@FriendlyWrt /u/o/nostrdb (master)# ./bench-ingest-many\r\nfish: Job 1, './bench-ingest-many' terminated by signal SIGSEGV (Address boundary error)\r\nroot@FriendlyWrt /u/o/nostrdb (master) [SIGSEGV]# gdb ./bench-ingest-many\r\nGNU gdb (GDB) 11.2\r\nCopyright (C) 2022 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.\r\nType \"show copying\" and \"show warranty\" for details.\r\nThis GDB was configured as \"aarch64-openwrt-linux\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<https://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n    <http://www.gnu.org/software/gdb/documentation/>.\r\n\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from ./bench-ingest-many...\r\n(gdb) r\r\nStarting program: /usb/opt/nostrdb/bench-ingest-many\r\n[New LWP 31045]\r\n[New LWP 31046]\r\n[New LWP 31047]\r\n\r\nThread 2 \"bench-ingest-ma\" received signal SIGSEGV, Segmentation fault.\r\n[Switching to LWP 31045]\r\nprot_queue_pop_all (q=0xfffff7ffff68, q@entry=0xfffffffff1c0, dest=dest@entry=0xffff785c7a00, max_items=4096) at /usb/opt/nostrdb/protected_queue.h:186\r\n186             pthread_mutex_lock(&q->mutex);\r\n(gdb) bt\r\n#0  prot_queue_pop_all (q=0xfffff7ffff68, q@entry=0xfffffffff1c0, dest=dest@entry=0xffff785c7a00, max_items=4096) at /usb/opt/nostrdb/protected_queue.h:186\r\n#1  0x0000000000404778 in ndb_writer_thread (data=0xfffff7ffff48) at nostrdb.c:569\r\n#2  0x0000fffff7f9f124 in ?? () from /lib/ld-musl-aarch64.so.1\r\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\r\n(gdb) q\r\n```\r\n\r\nI built with \"make\", then \"make bench-ingest-many\" to build the binary, from a fully fresh and just-pulled (`git rev-parse HEAD: 1b389a869f8836af4cf80f5fe4c884817dfe47c3`) repo.\r\n\r\nI am on OpenWrt, ARM64 (RK3588).\r\n\r\nIs there something I can do to further dig into this?\r\n\r\nThanks!",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/13/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-08-18T15:11:36Z",
      "updated_at": "2023-08-18T15:11:36Z",
      "body": "On Fri, Aug 18, 2023 at 07:33:20AM -0700, Ingwie Phoenix wrote:\n>This is the full output I get from GDB:\n>I built with \"make\", then \"make bench-ingest-many\" to build the binary, from a fully fresh and just-pulled (`git rev-parse HEAD: 1b389a869f8836af4cf80f5fe4c884817dfe47c3`) repo.\n>\n>I am on OpenWrt, ARM64 (RK3588).\n>\n>Is there something I can do to further dig into this?\n\nnot sure, this codebase is very new and uses lots of untested\ncomponents. I haven't run into this one.\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/12",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/12",
      "id": 1848708029,
      "node_id": "I_kwDOJ9k5Is5uMQu9",
      "number": 12,
      "title": "Assertion Failure in nostrdb.c at Line 611",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2023-08-13T19:17:41Z",
      "updated_at": "2023-12-01T18:40:24Z",
      "closed_at": "2023-12-01T18:40:24Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "While executing the 'fuzzer' program, an assertion failed in the file 'nostrdb.c' at line 611. This occurred during a transaction commit on the writer thread, causing the program to abort.\r\n\r\n```\r\nwriter thread txn commit failedfuzzer: nostrdb.c:611: void *ndb_writer_thread(void *): Assertion `false' failed.\r\nAborted\r\n```\r\n\r\n**Input File (test0000):**\r\n```\r\n[\"EVENT\"\"\"{\"content\"\"created_at\":0\r\n\"id\"\"5086a8f76fe1da7fb56a25d1bebbafd70fca62e36a72c6263f900ff49b8f8604\"\"kind\":0 \"pubkey\":9c87f94bcbe2a837adc28d46c34eeaab8fc2e1cdf94fe19d4b99ae6a5e6acedc \"sig\"\"27374975879c94658412469cee6db73d538971d21a7b580726a407329a4cafc677fb56b946994cea59c3d9e118fef27e4e61de9d2c46ac0a65df14153ea93cf5\"\"tags\"[[][\"\"]]}]\r\n```\r\n\r\nEncoded in Base64, the above input is:\r\n```\r\nWyJFVkVOVCIiInsiY29udGVudCIiY3JlYXRlZF9hdCI6MAoiaWQiIjUwODZhOGY3NmZlMWRhN2Zi\r\nNTZhMjVkMWJlYmJhZmQ3MGZjYTYyZTM2YTcyYzYyNjNmOTAwZmY0OWI4Zjg2MDQiImtpbmQiOjAg\r\nInB1YmtleSI6OWM4N2Y5NGJjYmUyYTgzN2FkYzI4ZDQ2YzM0ZWVhYWI4ZmMyZTFjZGY5NGZlMTlk\r\nNGI5OWFlNmE1ZTZhY2VkYyAic2lnIiIyNzM3NDk3NTg3OWM5NDY1ODQxMjQ2OWNlZTZkYjczZDUz\r\nODk3MWQyMWE3YjU4MDcyNmE0MDczMjlhNGNhZmM2NzdmYjU2Yjk0Njk5NGNlYTU5YzNkOWUxMThm\r\nZWYyN2U0ZTYxZGU5ZDJjNDZhYzBhNjVkZjE0MTUzZWE5M2NmNSIidGFncyJbW11bIiJdXX1d\r\n```",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/12",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/12",
      "id": 1848708029,
      "node_id": "I_kwDOJ9k5Is5uMQu9",
      "number": 12,
      "title": "Assertion Failure in nostrdb.c at Line 611",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2023-08-13T19:17:41Z",
      "updated_at": "2023-12-01T18:40:24Z",
      "closed_at": "2023-12-01T18:40:24Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "While executing the 'fuzzer' program, an assertion failed in the file 'nostrdb.c' at line 611. This occurred during a transaction commit on the writer thread, causing the program to abort.\r\n\r\n```\r\nwriter thread txn commit failedfuzzer: nostrdb.c:611: void *ndb_writer_thread(void *): Assertion `false' failed.\r\nAborted\r\n```\r\n\r\n**Input File (test0000):**\r\n```\r\n[\"EVENT\"\"\"{\"content\"\"created_at\":0\r\n\"id\"\"5086a8f76fe1da7fb56a25d1bebbafd70fca62e36a72c6263f900ff49b8f8604\"\"kind\":0 \"pubkey\":9c87f94bcbe2a837adc28d46c34eeaab8fc2e1cdf94fe19d4b99ae6a5e6acedc \"sig\"\"27374975879c94658412469cee6db73d538971d21a7b580726a407329a4cafc677fb56b946994cea59c3d9e118fef27e4e61de9d2c46ac0a65df14153ea93cf5\"\"tags\"[[][\"\"]]}]\r\n```\r\n\r\nEncoded in Base64, the above input is:\r\n```\r\nWyJFVkVOVCIiInsiY29udGVudCIiY3JlYXRlZF9hdCI6MAoiaWQiIjUwODZhOGY3NmZlMWRhN2Zi\r\nNTZhMjVkMWJlYmJhZmQ3MGZjYTYyZTM2YTcyYzYyNjNmOTAwZmY0OWI4Zjg2MDQiImtpbmQiOjAg\r\nInB1YmtleSI6OWM4N2Y5NGJjYmUyYTgzN2FkYzI4ZDQ2YzM0ZWVhYWI4ZmMyZTFjZGY5NGZlMTlk\r\nNGI5OWFlNmE1ZTZhY2VkYyAic2lnIiIyNzM3NDk3NTg3OWM5NDY1ODQxMjQ2OWNlZTZkYjczZDUz\r\nODk3MWQyMWE3YjU4MDcyNmE0MDczMjlhNGNhZmM2NzdmYjU2Yjk0Njk5NGNlYTU5YzNkOWUxMThm\r\nZWYyN2U0ZTYxZGU5ZDJjNDZhYzBhNjVkZjE0MTUzZWE5M2NmNSIidGFncyJbW11bIiJdXX1d\r\n```",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-08-16T17:22:18Z",
      "updated_at": "2023-08-16T17:22:18Z",
      "body": "On Sun, Aug 13, 2023 at 12:17:51PM -0700, geeknik wrote:\n>While executing the 'fuzzer' program, an assertion failed in the file 'nostrdb.c' at line 611. This occurred during a transaction commit on the writer thread, causing the program to abort.\n>\n>```\n>writer thread txn commit failedfuzzer: nostrdb.c:611: void *ndb_writer_thread(void *): Assertion `false' failed.\n>Aborted\n>```\n>\n>**Input File (test0000):**\n>```\n>[\"EVENT\"\"\"{\"content\"\"created_at\":0\n>\"id\"\"5086a8f76fe1da7fb56a25d1bebbafd70fca62e36a72c6263f900ff49b8f8604\"\"kind\":0 \"pubkey\":9c87f94bcbe2a837adc28d46c34eeaab8fc2e1cdf94fe19d4b99ae6a5e6acedc \"sig\"\"27374975879c94658412469cee6db73d538971d21a7b580726a407329a4cafc677fb56b946994cea59c3d9e118fef27e4e61de9d2c46ac0a65df14153ea93cf5\"\"tags\"[[][\"\"]]}]\n>```\n>\n>Encoded in Base64, the above input is:\n>```\n>WyJFVkVOVCIiInsiY29udGVudCIiY3JlYXRlZF9hdCI6MAoiaWQiIjUwODZhOGY3NmZlMWRhN2Zi\n>NTZhMjVkMWJlYmJhZmQ3MGZjYTYyZTM2YTcyYzYyNjNmOTAwZmY0OWI4Zjg2MDQiImtpbmQiOjAg\n>InB1YmtleSI6OWM4N2Y5NGJjYmUyYTgzN2FkYzI4ZDQ2YzM0ZWVhYWI4ZmMyZTFjZGY5NGZlMTlk\n>NGI5OWFlNmE1ZTZhY2VkYyAic2lnIiIyNzM3NDk3NTg3OWM5NDY1ODQxMjQ2OWNlZTZkYjczZDUz\n>ODk3MWQyMWE3YjU4MDcyNmE0MDczMjlhNGNhZmM2NzdmYjU2Yjk0Njk5NGNlYTU5YzNkOWUxMThm\n>ZWYyN2U0ZTYxZGU5ZDJjNDZhYzBhNjVkZjE0MTUzZWE5M2NmNSIidGFncyJbW11bIiJdXX1d\n>```\n\nawesome! thanks. will add a test case for this\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/12",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/12",
      "id": 1848708029,
      "node_id": "I_kwDOJ9k5Is5uMQu9",
      "number": 12,
      "title": "Assertion Failure in nostrdb.c at Line 611",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2023-08-13T19:17:41Z",
      "updated_at": "2023-12-01T18:40:24Z",
      "closed_at": "2023-12-01T18:40:24Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "While executing the 'fuzzer' program, an assertion failed in the file 'nostrdb.c' at line 611. This occurred during a transaction commit on the writer thread, causing the program to abort.\r\n\r\n```\r\nwriter thread txn commit failedfuzzer: nostrdb.c:611: void *ndb_writer_thread(void *): Assertion `false' failed.\r\nAborted\r\n```\r\n\r\n**Input File (test0000):**\r\n```\r\n[\"EVENT\"\"\"{\"content\"\"created_at\":0\r\n\"id\"\"5086a8f76fe1da7fb56a25d1bebbafd70fca62e36a72c6263f900ff49b8f8604\"\"kind\":0 \"pubkey\":9c87f94bcbe2a837adc28d46c34eeaab8fc2e1cdf94fe19d4b99ae6a5e6acedc \"sig\"\"27374975879c94658412469cee6db73d538971d21a7b580726a407329a4cafc677fb56b946994cea59c3d9e118fef27e4e61de9d2c46ac0a65df14153ea93cf5\"\"tags\"[[][\"\"]]}]\r\n```\r\n\r\nEncoded in Base64, the above input is:\r\n```\r\nWyJFVkVOVCIiInsiY29udGVudCIiY3JlYXRlZF9hdCI6MAoiaWQiIjUwODZhOGY3NmZlMWRhN2Zi\r\nNTZhMjVkMWJlYmJhZmQ3MGZjYTYyZTM2YTcyYzYyNjNmOTAwZmY0OWI4Zjg2MDQiImtpbmQiOjAg\r\nInB1YmtleSI6OWM4N2Y5NGJjYmUyYTgzN2FkYzI4ZDQ2YzM0ZWVhYWI4ZmMyZTFjZGY5NGZlMTlk\r\nNGI5OWFlNmE1ZTZhY2VkYyAic2lnIiIyNzM3NDk3NTg3OWM5NDY1ODQxMjQ2OWNlZTZkYjczZDUz\r\nODk3MWQyMWE3YjU4MDcyNmE0MDczMjlhNGNhZmM2NzdmYjU2Yjk0Njk5NGNlYTU5YzNkOWUxMThm\r\nZWYyN2U0ZTYxZGU5ZDJjNDZhYzBhNjVkZjE0MTUzZWE5M2NmNSIidGFncyJbW11bIiJdXX1d\r\n```",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-08-21T21:38:44Z",
      "updated_at": "2023-08-21T21:38:44Z",
      "body": "I can't seem to reproduce this. I added a test below but it passes\nwithout a crash.\n\n From be06e3d1a622e436050a66df1b200f7441242c07 Mon Sep 17 00:00:00 2001\nFrom: William Casarin ***@***.***>\nDate: Mon, 21 Aug 2023 14:36:55 -0700\nSubject: [PATCH] test: add test for fuzz crash\n\nSigned-off-by: William Casarin ***@***.***>\n---\n  test.c | 9 +++++++++\n  1 file changed, 9 insertions(+)\n\ndiff --git a/test.c b/test.c\nindex 279e415a012d..7dffe3d9bbe5 100644\n--- a/test.c\n+++ b/test.c\n@@ -47,6 +47,14 @@ static void test_load_profiles()\n  \tfree(buf);\n  }\n  \n+static void test_fuzz_events() {\n+\tstruct ndb *ndb;\n+\tconst char *str = \"[\\\"EVENT\\\"\\\"\\\"{\\\"content\\\"\\\"created_at\\\":0 \\\"id\\\"\\\"5086a8f76fe1da7fb56a25d1bebbafd70fca62e36a72c6263f900ff49b8f8604\\\"\\\"kind\\\":0 \\\"pubkey\\\":9c87f94bcbe2a837adc28d46c34eeaab8fc2e1cdf94fe19d4b99ae6a5e6acedc \\\"sig\\\"\\\"27374975879c94658412469cee6db73d538971d21a7b580726a407329a4cafc677fb56b946994cea59c3d9e118fef27e4e61de9d2c46ac0a65df14153 ea93cf5\\\"\\\"tags\\\"[[][\\\"\\\"]]}]\";\n+\n+\tndb_init(&ndb, 1024 * 1024, 1);\n+\tndb_process_event(ndb, str, strlen(str));\n+\tndb_destroy(ndb);\n+}\n  \n  static void test_basic_event() {\n  \tunsigned char buf[512];\n@@ -538,6 +546,7 @@ int main(int argc, const char *argv[]) {\n  \ttest_tce_eose();\n  \ttest_tce_command_result_empty_msg();\n  \ttest_content_len();\n+\ttest_fuzz_events();\n  \n  \t// protected queue tests\n  \ttest_queue_init_pop_push();\n-- \n2.39.2 (Apple Git-144)\n\n\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/12",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/12",
      "id": 1848708029,
      "node_id": "I_kwDOJ9k5Is5uMQu9",
      "number": 12,
      "title": "Assertion Failure in nostrdb.c at Line 611",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 3,
      "created_at": "2023-08-13T19:17:41Z",
      "updated_at": "2023-12-01T18:40:24Z",
      "closed_at": "2023-12-01T18:40:24Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "While executing the 'fuzzer' program, an assertion failed in the file 'nostrdb.c' at line 611. This occurred during a transaction commit on the writer thread, causing the program to abort.\r\n\r\n```\r\nwriter thread txn commit failedfuzzer: nostrdb.c:611: void *ndb_writer_thread(void *): Assertion `false' failed.\r\nAborted\r\n```\r\n\r\n**Input File (test0000):**\r\n```\r\n[\"EVENT\"\"\"{\"content\"\"created_at\":0\r\n\"id\"\"5086a8f76fe1da7fb56a25d1bebbafd70fca62e36a72c6263f900ff49b8f8604\"\"kind\":0 \"pubkey\":9c87f94bcbe2a837adc28d46c34eeaab8fc2e1cdf94fe19d4b99ae6a5e6acedc \"sig\"\"27374975879c94658412469cee6db73d538971d21a7b580726a407329a4cafc677fb56b946994cea59c3d9e118fef27e4e61de9d2c46ac0a65df14153ea93cf5\"\"tags\"[[][\"\"]]}]\r\n```\r\n\r\nEncoded in Base64, the above input is:\r\n```\r\nWyJFVkVOVCIiInsiY29udGVudCIiY3JlYXRlZF9hdCI6MAoiaWQiIjUwODZhOGY3NmZlMWRhN2Zi\r\nNTZhMjVkMWJlYmJhZmQ3MGZjYTYyZTM2YTcyYzYyNjNmOTAwZmY0OWI4Zjg2MDQiImtpbmQiOjAg\r\nInB1YmtleSI6OWM4N2Y5NGJjYmUyYTgzN2FkYzI4ZDQ2YzM0ZWVhYWI4ZmMyZTFjZGY5NGZlMTlk\r\nNGI5OWFlNmE1ZTZhY2VkYyAic2lnIiIyNzM3NDk3NTg3OWM5NDY1ODQxMjQ2OWNlZTZkYjczZDUz\r\nODk3MWQyMWE3YjU4MDcyNmE0MDczMjlhNGNhZmM2NzdmYjU2Yjk0Njk5NGNlYTU5YzNkOWUxMThm\r\nZWYyN2U0ZTYxZGU5ZDJjNDZhYzBhNjVkZjE0MTUzZWE5M2NmNSIidGFncyJbW11bIiJdXX1d\r\n```",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/12/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    },
    "comment": {
      "user": "geeknik",
      "created_at": "2023-09-02T00:55:46Z",
      "updated_at": "2023-09-02T00:55:46Z",
      "body": "I guess we can ignore this for now, I can no longer reproduce it. #heisenbug"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/11",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/11",
      "id": 1848619150,
      "node_id": "PR_kwDOJ9k5Is5X0kl7",
      "number": 11,
      "title": "Update hex.h",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 2,
      "created_at": "2023-08-13T14:35:46Z",
      "updated_at": "2023-12-04T22:39:25Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/11",
        "html_url": "https://github.com/damus-io/nostrdb/pull/11",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/11.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/11.patch",
        "merged_at": null
      },
      "body": "Probably fixes #10 ",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/11",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/11",
      "id": 1848619150,
      "node_id": "PR_kwDOJ9k5Is5X0kl7",
      "number": 11,
      "title": "Update hex.h",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 2,
      "created_at": "2023-08-13T14:35:46Z",
      "updated_at": "2023-12-04T22:39:25Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/11",
        "html_url": "https://github.com/damus-io/nostrdb/pull/11",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/11.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/11.patch",
        "merged_at": null
      },
      "body": "Probably fixes #10 ",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "geeknik",
      "created_at": "2023-08-13T14:51:23Z",
      "updated_at": "2023-08-13T14:51:23Z",
      "body": "Confirmed locally this fixes the crashes I was seeing. 🤙🏻"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/11",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/11",
      "id": 1848619150,
      "node_id": "PR_kwDOJ9k5Is5X0kl7",
      "number": 11,
      "title": "Update hex.h",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 2,
      "created_at": "2023-08-13T14:35:46Z",
      "updated_at": "2023-12-04T22:39:25Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/11",
        "html_url": "https://github.com/damus-io/nostrdb/pull/11",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/11.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/11.patch",
        "merged_at": null
      },
      "body": "Probably fixes #10 ",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/11/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-08-16T17:22:52Z",
      "updated_at": "2023-08-16T17:22:52Z",
      "body": "On Sun, Aug 13, 2023 at 07:51:33AM -0700, geeknik wrote:\n>Confirmed locally this fixes the crashes I was seeing. 🤙🏻\n\ngreat catch\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/10",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/10/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/10/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/10/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/10",
      "id": 1848617435,
      "node_id": "I_kwDOJ9k5Is5uL6nb",
      "number": 10,
      "title": "Global buffer overflow in char_to_hex()",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 0,
      "created_at": "2023-08-13T14:31:14Z",
      "updated_at": "2023-08-18T15:42:15Z",
      "closed_at": "2023-08-18T15:42:15Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "This error is occurring because the hex_table array is being accessed with an index that is outside its bounds.\r\n\r\n```\r\n==34840==ERROR: AddressSanitizer: global-buffer-overflow on address 0x00000038f47f at pc 0x000000512353 bp 0x7ff980f5b050 sp 0x7ff980f5b048\r\nREAD of size 1 at 0x00000038f47f thread T2\r\n    #0 0x512352 in char_to_hex /root/nostrdb/./hex.h:18:6\r\n    #1 0x512352 in hex_decode /root/nostrdb/./hex.h:31:37\r\n    #2 0x512352 in ndb_ingester_json_controller /root/nostrdb/nostrdb.c:317:2\r\n    #3 0x512cf1 in ndb_json_parser_parse /root/nostrdb/nostrdb.c:1046:11\r\n    #4 0x512cf1 in ndb_ws_event_from_json /root/nostrdb/nostrdb.c:1621:13\r\n    #5 0x500597 in ndb_ingester_process_event /root/nostrdb/nostrdb.c:386:3\r\n    #6 0x500597 in ndb_ingester_thread /root/nostrdb/nostrdb.c:673:9\r\n    #7 0x7ff98926c608 in start_thread /build/glibc-SzIz7B/glibc-2.31/nptl/pthread_create.c:477:8\r\n    #8 0x7ff989017132 in clone /build/glibc-SzIz7B/glibc-2.31/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n\r\n0x00000038f47f is located 1 bytes to the left of global variable 'hex_table' defined in './hex.h:7:19' (0x38f480) of size 256\r\n0x00000038f47f is located 60 bytes to the right of global variable '<string literal>' defined in 'nostrdb.c:1091:48' (0x38f440) of size 3\r\n  '<string literal>' is ascii string '\\t'\r\nSUMMARY: AddressSanitizer: global-buffer-overflow /root/nostrdb/./hex.h:18:6 in char_to_hex\r\n```\r\n\r\n```\r\nstatic inline int char_to_hex(unsigned char *val, int c)\r\n{\r\n\tif (hex_table[(int)c] || c == '0') {\r\n\t\t*val = hex_table[c];\r\n\t\treturn 1;\r\n\t}\r\n\treturn 0;\r\n}\r\n```\r\n\r\nIf I'm reading the code correctly, `c` is being used as an index into `hex_table`, but there is no guarantee that `c` is within the valid range of indices for `hex_table`. Since `hex_table` has 256 elements, valid indices are in the range `[0, 255]`. If `c` is outside this range, it will result in undefined behavior, such as the buffer overflow indicated above.\r\n\r\nHere's a base64 representation of the bad data which triggers this:\r\n```\r\nImlkIiIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDD/MDAwMDAw\r\nMDAwMDAwMDAwMDAwIg==\r\n```\r\n",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/10/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/10/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/9",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/9",
      "id": 1848332833,
      "node_id": "PR_kwDOJ9k5Is5XzpO5",
      "number": 9,
      "title": "Update threadpool.h",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 2,
      "created_at": "2023-08-13T01:07:14Z",
      "updated_at": "2023-12-01T22:04:04Z",
      "closed_at": "2023-12-01T22:04:04Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/9",
        "html_url": "https://github.com/damus-io/nostrdb/pull/9",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/9.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/9.patch",
        "merged_at": null
      },
      "body": "Prevent creation of a thread pool with zero threads",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/9",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/9",
      "id": 1848332833,
      "node_id": "PR_kwDOJ9k5Is5XzpO5",
      "number": 9,
      "title": "Update threadpool.h",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 2,
      "created_at": "2023-08-13T01:07:14Z",
      "updated_at": "2023-12-01T22:04:04Z",
      "closed_at": "2023-12-01T22:04:04Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/9",
        "html_url": "https://github.com/damus-io/nostrdb/pull/9",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/9.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/9.patch",
        "merged_at": null
      },
      "body": "Prevent creation of a thread pool with zero threads",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-08-16T17:24:13Z",
      "updated_at": "2023-08-16T17:24:13Z",
      "body": "On Sat, Aug 12, 2023 at 06:07:26PM -0700, geeknik wrote:\n>Prevent creation of a thread pool with zero threads\n>You can view, comment on, or merge this pull request online at:\n\nmakes sense\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/9",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/9",
      "id": 1848332833,
      "node_id": "PR_kwDOJ9k5Is5XzpO5",
      "number": 9,
      "title": "Update threadpool.h",
      "user": {
        "login": "geeknik",
        "id": 466878,
        "node_id": "MDQ6VXNlcjQ2Njg3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/466878?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/geeknik",
        "html_url": "https://github.com/geeknik",
        "followers_url": "https://api.github.com/users/geeknik/followers",
        "following_url": "https://api.github.com/users/geeknik/following{/other_user}",
        "gists_url": "https://api.github.com/users/geeknik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/geeknik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/geeknik/subscriptions",
        "organizations_url": "https://api.github.com/users/geeknik/orgs",
        "repos_url": "https://api.github.com/users/geeknik/repos",
        "events_url": "https://api.github.com/users/geeknik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/geeknik/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 2,
      "created_at": "2023-08-13T01:07:14Z",
      "updated_at": "2023-12-01T22:04:04Z",
      "closed_at": "2023-12-01T22:04:04Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/9",
        "html_url": "https://github.com/damus-io/nostrdb/pull/9",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/9.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/9.patch",
        "merged_at": null
      },
      "body": "Prevent creation of a thread pool with zero threads",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/9/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "geeknik",
      "created_at": "2023-08-18T17:21:22Z",
      "updated_at": "2023-08-18T17:21:22Z",
      "body": "Interesting. The FPE (division by zero) error went away after I added my check. "
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/8",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/8/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/8/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/8/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/8",
      "id": 1842131935,
      "node_id": "I_kwDOJ9k5Is5tzLPf",
      "number": 8,
      "title": "Threadpool",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 0,
      "created_at": "2023-08-08T21:32:56Z",
      "updated_at": "2023-08-10T15:04:37Z",
      "closed_at": "2023-08-10T15:04:37Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "ingester threadpool... why not! let's go fasttt",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/8/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/8/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/7",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/7/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/7/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/7/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/7",
      "id": 1837247926,
      "node_id": "I_kwDOJ9k5Is5tgi22",
      "number": 7,
      "title": "Initial LMDB integration",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 0,
      "created_at": "2023-08-04T19:36:42Z",
      "updated_at": "2023-08-04T19:38:24Z",
      "closed_at": "2023-08-04T19:38:24Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "\r\n```[tasklist]\r\n- [ ] #4 \r\n```",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/7/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/7/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/6",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/6",
      "id": 1837230169,
      "node_id": "I_kwDOJ9k5Is5tgehZ",
      "number": 6,
      "title": "Clustered created_at indices",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/milestones/1",
        "html_url": "https://github.com/damus-io/nostrdb/milestone/1",
        "labels_url": "https://api.github.com/repos/damus-io/nostrdb/milestones/1/labels",
        "id": 9744457,
        "node_id": "MI_kwDOJ9k5Is4AlLBJ",
        "number": 1,
        "title": "Initial LMDB Database",
        "description": "The initial implementation of the nostrdb database. Implement LMDB and get some basic queries working.",
        "creator": {
          "login": "jb55",
          "id": 45598,
          "node_id": "MDQ6VXNlcjQ1NTk4",
          "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jb55",
          "html_url": "https://github.com/jb55",
          "followers_url": "https://api.github.com/users/jb55/followers",
          "following_url": "https://api.github.com/users/jb55/following{/other_user}",
          "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
          "organizations_url": "https://api.github.com/users/jb55/orgs",
          "repos_url": "https://api.github.com/users/jb55/repos",
          "events_url": "https://api.github.com/users/jb55/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jb55/received_events",
          "type": "User",
          "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 2,
        "state": "open",
        "created_at": "2023-08-04T19:16:58Z",
        "updated_at": "2023-08-31T19:50:55Z",
        "due_on": null,
        "closed_at": null
      },
      "comments": 1,
      "created_at": "2023-08-04T19:19:29Z",
      "updated_at": "2023-08-31T19:50:56Z",
      "closed_at": "2023-08-31T19:50:55Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "For efficient since/until scans\r\n\r\nLMDB stores keys in an ordered fashion, so if we cluster keys like <created_at><id> and <id> then we can do quick lookups by date and id.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/6",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/6",
      "id": 1837230169,
      "node_id": "I_kwDOJ9k5Is5tgehZ",
      "number": 6,
      "title": "Clustered created_at indices",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/milestones/1",
        "html_url": "https://github.com/damus-io/nostrdb/milestone/1",
        "labels_url": "https://api.github.com/repos/damus-io/nostrdb/milestones/1/labels",
        "id": 9744457,
        "node_id": "MI_kwDOJ9k5Is4AlLBJ",
        "number": 1,
        "title": "Initial LMDB Database",
        "description": "The initial implementation of the nostrdb database. Implement LMDB and get some basic queries working.",
        "creator": {
          "login": "jb55",
          "id": 45598,
          "node_id": "MDQ6VXNlcjQ1NTk4",
          "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jb55",
          "html_url": "https://github.com/jb55",
          "followers_url": "https://api.github.com/users/jb55/followers",
          "following_url": "https://api.github.com/users/jb55/following{/other_user}",
          "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
          "organizations_url": "https://api.github.com/users/jb55/orgs",
          "repos_url": "https://api.github.com/users/jb55/repos",
          "events_url": "https://api.github.com/users/jb55/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jb55/received_events",
          "type": "User",
          "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 2,
        "state": "open",
        "created_at": "2023-08-04T19:16:58Z",
        "updated_at": "2023-08-31T19:50:55Z",
        "due_on": null,
        "closed_at": null
      },
      "comments": 1,
      "created_at": "2023-08-04T19:19:29Z",
      "updated_at": "2023-08-31T19:50:56Z",
      "closed_at": "2023-08-31T19:50:55Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "For efficient since/until scans\r\n\r\nLMDB stores keys in an ordered fashion, so if we cluster keys like <created_at><id> and <id> then we can do quick lookups by date and id.",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/6/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-08-31T19:50:55Z",
      "updated_at": "2023-08-31T19:50:55Z",
      "body": "should be done now (this is the tsid thing)"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/5",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/5/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/5/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/5/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/5",
      "id": 1837220692,
      "node_id": "I_kwDOJ9k5Is5tgcNU",
      "number": 5,
      "title": "Initial LMDB integration",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 0,
      "created_at": "2023-08-04T19:09:42Z",
      "updated_at": "2023-08-04T19:17:07Z",
      "closed_at": "2023-08-04T19:17:07Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "Setup `struct ndb` to hold db environment.\r\n\r\nInsert data\r\n\r\nGet data out\r\n\r\nyada yada",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/5/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/5/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/4",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/4",
      "id": 1837189285,
      "node_id": "I_kwDOJ9k5Is5tgUil",
      "number": 4,
      "title": "Safe queue implementation",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "assignees": [
        {
          "login": "jb55",
          "id": 45598,
          "node_id": "MDQ6VXNlcjQ1NTk4",
          "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jb55",
          "html_url": "https://github.com/jb55",
          "followers_url": "https://api.github.com/users/jb55/followers",
          "following_url": "https://api.github.com/users/jb55/following{/other_user}",
          "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
          "organizations_url": "https://api.github.com/users/jb55/orgs",
          "repos_url": "https://api.github.com/users/jb55/repos",
          "events_url": "https://api.github.com/users/jb55/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jb55/received_events",
          "type": "User",
          "site_admin": false
        }
      ],
      "milestone": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/milestones/1",
        "html_url": "https://github.com/damus-io/nostrdb/milestone/1",
        "labels_url": "https://api.github.com/repos/damus-io/nostrdb/milestones/1/labels",
        "id": 9744457,
        "node_id": "MI_kwDOJ9k5Is4AlLBJ",
        "number": 1,
        "title": "Initial LMDB Database",
        "description": "The initial implementation of the nostrdb database. Implement LMDB and get some basic queries working.",
        "creator": {
          "login": "jb55",
          "id": 45598,
          "node_id": "MDQ6VXNlcjQ1NTk4",
          "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jb55",
          "html_url": "https://github.com/jb55",
          "followers_url": "https://api.github.com/users/jb55/followers",
          "following_url": "https://api.github.com/users/jb55/following{/other_user}",
          "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
          "organizations_url": "https://api.github.com/users/jb55/orgs",
          "repos_url": "https://api.github.com/users/jb55/repos",
          "events_url": "https://api.github.com/users/jb55/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jb55/received_events",
          "type": "User",
          "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 2,
        "state": "open",
        "created_at": "2023-08-04T19:16:58Z",
        "updated_at": "2023-08-31T19:50:55Z",
        "due_on": null,
        "closed_at": null
      },
      "comments": 1,
      "created_at": "2023-08-04T18:38:53Z",
      "updated_at": "2023-08-04T23:45:56Z",
      "closed_at": "2023-08-04T23:45:55Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "We're going to use the same parallellism/concurrency model as strfry, so let's build a protected queue in C",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/4",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/4",
      "id": 1837189285,
      "node_id": "I_kwDOJ9k5Is5tgUil",
      "number": 4,
      "title": "Safe queue implementation",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "assignees": [
        {
          "login": "jb55",
          "id": 45598,
          "node_id": "MDQ6VXNlcjQ1NTk4",
          "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jb55",
          "html_url": "https://github.com/jb55",
          "followers_url": "https://api.github.com/users/jb55/followers",
          "following_url": "https://api.github.com/users/jb55/following{/other_user}",
          "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
          "organizations_url": "https://api.github.com/users/jb55/orgs",
          "repos_url": "https://api.github.com/users/jb55/repos",
          "events_url": "https://api.github.com/users/jb55/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jb55/received_events",
          "type": "User",
          "site_admin": false
        }
      ],
      "milestone": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/milestones/1",
        "html_url": "https://github.com/damus-io/nostrdb/milestone/1",
        "labels_url": "https://api.github.com/repos/damus-io/nostrdb/milestones/1/labels",
        "id": 9744457,
        "node_id": "MI_kwDOJ9k5Is4AlLBJ",
        "number": 1,
        "title": "Initial LMDB Database",
        "description": "The initial implementation of the nostrdb database. Implement LMDB and get some basic queries working.",
        "creator": {
          "login": "jb55",
          "id": 45598,
          "node_id": "MDQ6VXNlcjQ1NTk4",
          "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jb55",
          "html_url": "https://github.com/jb55",
          "followers_url": "https://api.github.com/users/jb55/followers",
          "following_url": "https://api.github.com/users/jb55/following{/other_user}",
          "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
          "organizations_url": "https://api.github.com/users/jb55/orgs",
          "repos_url": "https://api.github.com/users/jb55/repos",
          "events_url": "https://api.github.com/users/jb55/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jb55/received_events",
          "type": "User",
          "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 2,
        "state": "open",
        "created_at": "2023-08-04T19:16:58Z",
        "updated_at": "2023-08-31T19:50:55Z",
        "due_on": null,
        "closed_at": null
      },
      "comments": 1,
      "created_at": "2023-08-04T18:38:53Z",
      "updated_at": "2023-08-04T23:45:56Z",
      "closed_at": "2023-08-04T23:45:55Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "We're going to use the same parallellism/concurrency model as strfry, so let's build a protected queue in C",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/4/timeline",
      "performed_via_github_app": null,
      "state_reason": "completed"
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-08-04T23:45:55Z",
      "updated_at": "2023-08-04T23:45:55Z",
      "body": "804df0bdf801c583e2f935361ab18edfb4f5261a"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/3",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/3/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/3/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/3/events",
      "html_url": "https://github.com/damus-io/nostrdb/issues/3",
      "id": 1828766007,
      "node_id": "I_kwDOJ9k5Is5tAME3",
      "number": 3,
      "title": "Negentropy sync",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following{/other_user}",
        "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/milestones/2",
        "html_url": "https://github.com/damus-io/nostrdb/milestone/2",
        "labels_url": "https://api.github.com/repos/damus-io/nostrdb/milestones/2/labels",
        "id": 9744460,
        "node_id": "MI_kwDOJ9k5Is4AlLBM",
        "number": 2,
        "title": "Negentropy",
        "description": "",
        "creator": {
          "login": "jb55",
          "id": 45598,
          "node_id": "MDQ6VXNlcjQ1NTk4",
          "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jb55",
          "html_url": "https://github.com/jb55",
          "followers_url": "https://api.github.com/users/jb55/followers",
          "following_url": "https://api.github.com/users/jb55/following{/other_user}",
          "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
          "organizations_url": "https://api.github.com/users/jb55/orgs",
          "repos_url": "https://api.github.com/users/jb55/repos",
          "events_url": "https://api.github.com/users/jb55/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jb55/received_events",
          "type": "User",
          "site_admin": false
        },
        "open_issues": 1,
        "closed_issues": 0,
        "state": "open",
        "created_at": "2023-08-04T19:17:35Z",
        "updated_at": "2023-08-04T19:17:42Z",
        "due_on": null,
        "closed_at": null
      },
      "comments": 0,
      "created_at": "2023-07-31T09:20:56Z",
      "updated_at": "2023-08-04T19:34:58Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "body": "Implement negentropy so that we have efficient queries with strfry instances\r\n\r\n```[tasklist]\r\n- [ ] Research\r\n```",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/3/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 1,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/3/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/2",
      "id": 1823339429,
      "node_id": "PR_kwDOJ9k5Is5Wfdqi",
      "number": 2,
      "title": "Add secp256k1 as dependency library",
      "user": {
        "login": "pedro-vicente",
        "id": 6119070,
        "node_id": "MDQ6VXNlcjYxMTkwNzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6119070?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pedro-vicente",
        "html_url": "https://github.com/pedro-vicente",
        "followers_url": "https://api.github.com/users/pedro-vicente/followers",
        "following_url": "https://api.github.com/users/pedro-vicente/following{/other_user}",
        "gists_url": "https://api.github.com/users/pedro-vicente/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pedro-vicente/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pedro-vicente/subscriptions",
        "organizations_url": "https://api.github.com/users/pedro-vicente/orgs",
        "repos_url": "https://api.github.com/users/pedro-vicente/repos",
        "events_url": "https://api.github.com/users/pedro-vicente/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pedro-vicente/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 4,
      "created_at": "2023-07-26T23:12:40Z",
      "updated_at": "2023-12-04T22:39:25Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/2",
        "html_url": "https://github.com/damus-io/nostrdb/pull/2",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/2.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/2.patch",
        "merged_at": null
      },
      "body": "Add secp256k1 as dependency library\r\nAdd target configurator to generate 'config.h'\r\nNote: renamed target 'bench' to 'benchmark', to avoid conflict with target 'bench' of secp256k1\r\n\r\n",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/2",
      "id": 1823339429,
      "node_id": "PR_kwDOJ9k5Is5Wfdqi",
      "number": 2,
      "title": "Add secp256k1 as dependency library",
      "user": {
        "login": "pedro-vicente",
        "id": 6119070,
        "node_id": "MDQ6VXNlcjYxMTkwNzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6119070?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pedro-vicente",
        "html_url": "https://github.com/pedro-vicente",
        "followers_url": "https://api.github.com/users/pedro-vicente/followers",
        "following_url": "https://api.github.com/users/pedro-vicente/following{/other_user}",
        "gists_url": "https://api.github.com/users/pedro-vicente/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pedro-vicente/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pedro-vicente/subscriptions",
        "organizations_url": "https://api.github.com/users/pedro-vicente/orgs",
        "repos_url": "https://api.github.com/users/pedro-vicente/repos",
        "events_url": "https://api.github.com/users/pedro-vicente/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pedro-vicente/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 4,
      "created_at": "2023-07-26T23:12:40Z",
      "updated_at": "2023-12-04T22:39:25Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/2",
        "html_url": "https://github.com/damus-io/nostrdb/pull/2",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/2.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/2.patch",
        "merged_at": null
      },
      "body": "Add secp256k1 as dependency library\r\nAdd target configurator to generate 'config.h'\r\nNote: renamed target 'bench' to 'benchmark', to avoid conflict with target 'bench' of secp256k1\r\n\r\n",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-07-26T23:21:45Z",
      "updated_at": "2023-07-26T23:21:45Z",
      "body": "great! thank you"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/2",
      "id": 1823339429,
      "node_id": "PR_kwDOJ9k5Is5Wfdqi",
      "number": 2,
      "title": "Add secp256k1 as dependency library",
      "user": {
        "login": "pedro-vicente",
        "id": 6119070,
        "node_id": "MDQ6VXNlcjYxMTkwNzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6119070?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pedro-vicente",
        "html_url": "https://github.com/pedro-vicente",
        "followers_url": "https://api.github.com/users/pedro-vicente/followers",
        "following_url": "https://api.github.com/users/pedro-vicente/following{/other_user}",
        "gists_url": "https://api.github.com/users/pedro-vicente/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pedro-vicente/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pedro-vicente/subscriptions",
        "organizations_url": "https://api.github.com/users/pedro-vicente/orgs",
        "repos_url": "https://api.github.com/users/pedro-vicente/repos",
        "events_url": "https://api.github.com/users/pedro-vicente/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pedro-vicente/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 4,
      "created_at": "2023-07-26T23:12:40Z",
      "updated_at": "2023-12-04T22:39:25Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/2",
        "html_url": "https://github.com/damus-io/nostrdb/pull/2",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/2.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/2.patch",
        "merged_at": null
      },
      "body": "Add secp256k1 as dependency library\r\nAdd target configurator to generate 'config.h'\r\nNote: renamed target 'bench' to 'benchmark', to avoid conflict with target 'bench' of secp256k1\r\n\r\n",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "pedro-vicente",
      "created_at": "2023-07-27T16:43:37Z",
      "updated_at": "2023-07-27T16:43:37Z",
      "body": "The cmake usage is\r\n\r\n```\r\ncmake -S . -B build \r\ncd build\r\ncmake --build .\r\n```\r\n\r\nand this builds target 'configurator' needed to generate 'config.h'\r\n\r\n```\r\nConsolidate compiler generated dependencies of target configurator\r\n[  4%] Linking C executable configurator\r\n```\r\n\r\n\r\nBut for some reason, on Mac, this target is not built\r\nSo, a solution , is to call it manually , like this\r\n\r\n\r\n```\r\ncmake -S . -B build \r\ncd build\r\ncmake --build . --target configurator\r\ncmake --build .\r\n```\r\n\r\nThis could be put on a README.md file "
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/2",
      "id": 1823339429,
      "node_id": "PR_kwDOJ9k5Is5Wfdqi",
      "number": 2,
      "title": "Add secp256k1 as dependency library",
      "user": {
        "login": "pedro-vicente",
        "id": 6119070,
        "node_id": "MDQ6VXNlcjYxMTkwNzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6119070?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pedro-vicente",
        "html_url": "https://github.com/pedro-vicente",
        "followers_url": "https://api.github.com/users/pedro-vicente/followers",
        "following_url": "https://api.github.com/users/pedro-vicente/following{/other_user}",
        "gists_url": "https://api.github.com/users/pedro-vicente/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pedro-vicente/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pedro-vicente/subscriptions",
        "organizations_url": "https://api.github.com/users/pedro-vicente/orgs",
        "repos_url": "https://api.github.com/users/pedro-vicente/repos",
        "events_url": "https://api.github.com/users/pedro-vicente/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pedro-vicente/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 4,
      "created_at": "2023-07-26T23:12:40Z",
      "updated_at": "2023-12-04T22:39:25Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/2",
        "html_url": "https://github.com/damus-io/nostrdb/pull/2",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/2.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/2.patch",
        "merged_at": null
      },
      "body": "Add secp256k1 as dependency library\r\nAdd target configurator to generate 'config.h'\r\nNote: renamed target 'bench' to 'benchmark', to avoid conflict with target 'bench' of secp256k1\r\n\r\n",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-08-21T21:49:29Z",
      "updated_at": "2023-08-21T21:49:29Z",
      "body": "Looks like all these patches touch the same file, let's just squash them together\n\nAlso, I added LMDB, that might need support as well.\n\n\nOn Wed, Jul 26, 2023 at 09:17:58PM -0400, pvn wrote:\n>\n>Closes: https://github.com/damus-io/nostrdb/pull/2\n>---\n> CMakeLists.txt | 2 +-\n> 1 file changed, 1 insertion(+), 1 deletion(-)\n>\n>diff --git a/CMakeLists.txt b/CMakeLists.txt\n>index a65265b..35c2d8d 100644\n>--- a/CMakeLists.txt\n>+++ b/CMakeLists.txt\n>@@ -1,5 +1,6 @@\n> # cmake -S . -B build\n> # cd build\n>+# cmake --build . --target configurator\n> # cmake --build .\n> # Pedro Vicente\n>\n>@@ -13,7 +14,6 @@ project (nostrdb C)\n>\n> set(CMAKE_FIND_LIBRARY_SUFFIXES \".a\")\n> set(BUILD_SHARED_LIBS OFF)\n>-set(CMAKE_EXE_LINKER_FLAGS \"-static\")\n>\n> include_directories(${CMAKE_SOURCE_DIR}/deps/secp256k1/include)\n> add_subdirectory(${CMAKE_SOURCE_DIR}/deps/secp256k1)\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/2",
      "id": 1823339429,
      "node_id": "PR_kwDOJ9k5Is5Wfdqi",
      "number": 2,
      "title": "Add secp256k1 as dependency library",
      "user": {
        "login": "pedro-vicente",
        "id": 6119070,
        "node_id": "MDQ6VXNlcjYxMTkwNzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6119070?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pedro-vicente",
        "html_url": "https://github.com/pedro-vicente",
        "followers_url": "https://api.github.com/users/pedro-vicente/followers",
        "following_url": "https://api.github.com/users/pedro-vicente/following{/other_user}",
        "gists_url": "https://api.github.com/users/pedro-vicente/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pedro-vicente/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pedro-vicente/subscriptions",
        "organizations_url": "https://api.github.com/users/pedro-vicente/orgs",
        "repos_url": "https://api.github.com/users/pedro-vicente/repos",
        "events_url": "https://api.github.com/users/pedro-vicente/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pedro-vicente/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 4,
      "created_at": "2023-07-26T23:12:40Z",
      "updated_at": "2023-12-04T22:39:25Z",
      "closed_at": null,
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/2",
        "html_url": "https://github.com/damus-io/nostrdb/pull/2",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/2.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/2.patch",
        "merged_at": null
      },
      "body": "Add secp256k1 as dependency library\r\nAdd target configurator to generate 'config.h'\r\nNote: renamed target 'bench' to 'benchmark', to avoid conflict with target 'bench' of secp256k1\r\n\r\n",
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/2/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "pedro-vicente",
      "created_at": "2023-08-22T05:49:43Z",
      "updated_at": "2023-08-22T05:49:43Z",
      "body": ">>> Looks like all these patches touch the same file, let's just squash them together\r\n\r\nYes, it is only 1 file for now, CMakeLists.txt, it seems I did changes in several commits. \r\nI am not that good with GitHub , it seems if you merge the pull request, that's all that is needed to merge.\r\n\r\nOr do I have to do something on my end?\r\n\r\nThanks\r\n"
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/1",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/1",
      "id": 1819199828,
      "node_id": "PR_kwDOJ9k5Is5WRe5B",
      "number": 1,
      "title": "Add a CMake script. Tested in Ubuntu Linux 22.04",
      "user": {
        "login": "pedro-vicente",
        "id": 6119070,
        "node_id": "MDQ6VXNlcjYxMTkwNzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6119070?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pedro-vicente",
        "html_url": "https://github.com/pedro-vicente",
        "followers_url": "https://api.github.com/users/pedro-vicente/followers",
        "following_url": "https://api.github.com/users/pedro-vicente/following{/other_user}",
        "gists_url": "https://api.github.com/users/pedro-vicente/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pedro-vicente/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pedro-vicente/subscriptions",
        "organizations_url": "https://api.github.com/users/pedro-vicente/orgs",
        "repos_url": "https://api.github.com/users/pedro-vicente/repos",
        "events_url": "https://api.github.com/users/pedro-vicente/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pedro-vicente/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2023-07-24T21:51:35Z",
      "updated_at": "2023-07-25T16:19:23Z",
      "closed_at": "2023-07-25T16:19:22Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/1",
        "html_url": "https://github.com/damus-io/nostrdb/pull/1",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/1.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/1.patch",
        "merged_at": null
      },
      "body": null,
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    }
  },
  {
    "issue": {
      "url": "https://api.github.com/repos/damus-io/nostrdb/issues/1",
      "repository_url": "https://api.github.com/repos/damus-io/nostrdb",
      "labels_url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/labels{/name}",
      "comments_url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/comments",
      "events_url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/events",
      "html_url": "https://github.com/damus-io/nostrdb/pull/1",
      "id": 1819199828,
      "node_id": "PR_kwDOJ9k5Is5WRe5B",
      "number": 1,
      "title": "Add a CMake script. Tested in Ubuntu Linux 22.04",
      "user": {
        "login": "pedro-vicente",
        "id": 6119070,
        "node_id": "MDQ6VXNlcjYxMTkwNzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6119070?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pedro-vicente",
        "html_url": "https://github.com/pedro-vicente",
        "followers_url": "https://api.github.com/users/pedro-vicente/followers",
        "following_url": "https://api.github.com/users/pedro-vicente/following{/other_user}",
        "gists_url": "https://api.github.com/users/pedro-vicente/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pedro-vicente/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pedro-vicente/subscriptions",
        "organizations_url": "https://api.github.com/users/pedro-vicente/orgs",
        "repos_url": "https://api.github.com/users/pedro-vicente/repos",
        "events_url": "https://api.github.com/users/pedro-vicente/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pedro-vicente/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [],
      "state": "closed",
      "locked": false,
      "assignee": null,
      "assignees": [],
      "milestone": null,
      "comments": 1,
      "created_at": "2023-07-24T21:51:35Z",
      "updated_at": "2023-07-25T16:19:23Z",
      "closed_at": "2023-07-25T16:19:22Z",
      "author_association": "CONTRIBUTOR",
      "active_lock_reason": null,
      "draft": false,
      "pull_request": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/pulls/1",
        "html_url": "https://github.com/damus-io/nostrdb/pull/1",
        "diff_url": "https://github.com/damus-io/nostrdb/pull/1.diff",
        "patch_url": "https://github.com/damus-io/nostrdb/pull/1.patch",
        "merged_at": null
      },
      "body": null,
      "reactions": {
        "url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "timeline_url": "https://api.github.com/repos/damus-io/nostrdb/issues/1/timeline",
      "performed_via_github_app": null,
      "state_reason": null
    },
    "comment": {
      "user": "jb55",
      "created_at": "2023-07-25T15:00:29Z",
      "updated_at": "2023-07-25T15:00:29Z",
      "body": "thanks! "
    }
  }
]
